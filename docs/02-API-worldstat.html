<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapitre 2 L’API Wbstats (Banque Mondiale) | DATA MINING</title>
  <meta name="description" content="Titre du cours" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapitre 2 L’API Wbstats (Banque Mondiale) | DATA MINING" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Titre du cours" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapitre 2 L’API Wbstats (Banque Mondiale) | DATA MINING" />
  
  <meta name="twitter:description" content="Titre du cours" />
  

<meta name="author" content="Claude Grasland, Professeur de Géographie, Université de Paris (Diderot)" />


<meta name="date" content="2022-01-14" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="01-API-intro.html"/>
<link rel="next" href="03-API-worldmap.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    background-color: #ffffff;
    color: #a0a0a0;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #a0a0a0;  padding-left: 4px; }
div.sourceCode
  { color: #1f1c1b; background-color: #ffffff; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span { color: #1f1c1b; } /* Normal */
code span.al { color: #bf0303; background-color: #f7e6e6; font-weight: bold; } /* Alert */
code span.an { color: #ca60ca; } /* Annotation */
code span.at { color: #0057ae; } /* Attribute */
code span.bn { color: #b08000; } /* BaseN */
code span.bu { color: #644a9b; font-weight: bold; } /* BuiltIn */
code span.cf { color: #1f1c1b; font-weight: bold; } /* ControlFlow */
code span.ch { color: #924c9d; } /* Char */
code span.cn { color: #aa5500; } /* Constant */
code span.co { color: #898887; } /* Comment */
code span.cv { color: #0095ff; } /* CommentVar */
code span.do { color: #607880; } /* Documentation */
code span.dt { color: #0057ae; } /* DataType */
code span.dv { color: #b08000; } /* DecVal */
code span.er { color: #bf0303; text-decoration: underline; } /* Error */
code span.ex { color: #0095ff; font-weight: bold; } /* Extension */
code span.fl { color: #b08000; } /* Float */
code span.fu { color: #644a9b; } /* Function */
code span.im { color: #ff5500; } /* Import */
code span.in { color: #b08000; } /* Information */
code span.kw { color: #1f1c1b; font-weight: bold; } /* Keyword */
code span.op { color: #1f1c1b; } /* Operator */
code span.ot { color: #006e28; } /* Other */
code span.pp { color: #006e28; } /* Preprocessor */
code span.re { color: #0057ae; background-color: #e0e9f8; } /* RegionMarker */
code span.sc { color: #3daee9; } /* SpecialChar */
code span.ss { color: #ff5500; } /* SpecialString */
code span.st { color: #bf0303; } /* String */
code span.va { color: #0057ae; } /* Variable */
code span.vs { color: #bf0303; } /* VerbatimString */
code span.wa { color: #bf0303; } /* Warning */
</style>


<link rel="stylesheet" href="css/tidyverse.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./index.html">Data Mining:  <em>C. Grasland</em></a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="00-presentation.html"><a href="00-presentation.html"><i class="fa fa-check"></i>Présentation</a>
<ul>
<li class="chapter" data-level="" data-path="00-presentation.html"><a href="00-presentation.html#à-propos-de-ce-document"><i class="fa fa-check"></i>À propos de ce document</a></li>
<li class="chapter" data-level="" data-path="00-presentation.html"><a href="00-presentation.html#prérequis"><i class="fa fa-check"></i>Prérequis</a></li>
<li class="chapter" data-level="" data-path="00-presentation.html"><a href="00-presentation.html#remerciements"><i class="fa fa-check"></i>Remerciements</a></li>
<li class="chapter" data-level="" data-path="00-presentation.html"><a href="00-presentation.html#licence"><i class="fa fa-check"></i>Licence</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="01-API-intro.html"><a href="01-API-intro.html"><i class="fa fa-check"></i><b>1</b> Collecter des données à l’aide d’une API</a>
<ul>
<li class="chapter" data-level="1.1" data-path="01-API-intro.html"><a href="01-API-intro.html#quest-ce-quune-api"><i class="fa fa-check"></i><b>1.1</b> Qu’est-ce qu’une API ?</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="01-API-intro.html"><a href="01-API-intro.html#définitions"><i class="fa fa-check"></i><b>1.1.1</b> Définitions</a></li>
<li class="chapter" data-level="1.1.2" data-path="01-API-intro.html"><a href="01-API-intro.html#domaine-dapplication"><i class="fa fa-check"></i><b>1.1.2</b> Domaine d’application</a></li>
<li class="chapter" data-level="1.1.3" data-path="01-API-intro.html"><a href="01-API-intro.html#système-client-serveur"><i class="fa fa-check"></i><b>1.1.3</b> Système client-serveur</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="01-API-intro.html"><a href="01-API-intro.html#comment-utiliser-une-api-dans-r"><i class="fa fa-check"></i><b>1.2</b> Comment utiliser une API dans R ?</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="01-API-intro.html"><a href="01-API-intro.html#pourquoi-utiliser-des-api"><i class="fa fa-check"></i><b>1.2.1</b> Pourquoi utiliser des API ?</a></li>
<li class="chapter" data-level="1.2.2" data-path="01-API-intro.html"><a href="01-API-intro.html#installer-les-packages-jsonlite-et-httr"><i class="fa fa-check"></i><b>1.2.2</b> Installer les packages jsonlite et httr</a></li>
<li class="chapter" data-level="1.2.3" data-path="01-API-intro.html"><a href="01-API-intro.html#structure-dune-requête"><i class="fa fa-check"></i><b>1.2.3</b> Structure d’une requête</a></li>
<li class="chapter" data-level="1.2.4" data-path="01-API-intro.html"><a href="01-API-intro.html#extraction-des-données"><i class="fa fa-check"></i><b>1.2.4</b> Extraction des données</a></li>
<li class="chapter" data-level="1.2.5" data-path="01-API-intro.html"><a href="01-API-intro.html#api-et-mise-à-jour-en-temps-réel"><i class="fa fa-check"></i><b>1.2.5</b> API et mise à jour en temps réel</a></li>
<li class="chapter" data-level="1.2.6" data-path="01-API-intro.html"><a href="01-API-intro.html#api-et-requête-paramétrique"><i class="fa fa-check"></i><b>1.2.6</b> API et requête paramétrique</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="01-API-intro.html"><a href="01-API-intro.html#api-ou-data-packages"><i class="fa fa-check"></i><b>1.3</b> API ou data packages ?</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="01-API-intro.html"><a href="01-API-intro.html#installation-et-chargement-du-package"><i class="fa fa-check"></i><b>1.3.1</b> Installation et chargement du package</a></li>
<li class="chapter" data-level="1.3.2" data-path="01-API-intro.html"><a href="01-API-intro.html#chargement-de-la-liste-des-tableaux"><i class="fa fa-check"></i><b>1.3.2</b> Chargement de la liste des tableaux</a></li>
<li class="chapter" data-level="1.3.3" data-path="01-API-intro.html"><a href="01-API-intro.html#examen-des-séries-présentes-dans-un-tableau"><i class="fa fa-check"></i><b>1.3.3</b> Examen des séries présentes dans un tableau</a></li>
<li class="chapter" data-level="1.3.4" data-path="01-API-intro.html"><a href="01-API-intro.html#extraction-dune-série-à-laide-de-son-identifiant"><i class="fa fa-check"></i><b>1.3.4</b> Extraction d’une série à l’aide de son identifiant</a></li>
<li class="chapter" data-level="1.3.5" data-path="01-API-intro.html"><a href="01-API-intro.html#extraction-dun-ensemble-de-séries-dun-même-tableau"><i class="fa fa-check"></i><b>1.3.5</b> Extraction d’un ensemble de séries d’un même tableau</a></li>
<li class="chapter" data-level="1.3.6" data-path="01-API-intro.html"><a href="01-API-intro.html#recupération-et-nettoyage-des-données"><i class="fa fa-check"></i><b>1.3.6</b> Recupération et nettoyage des données</a></li>
<li class="chapter" data-level="1.3.7" data-path="01-API-intro.html"><a href="01-API-intro.html#construction-dun-graphique"><i class="fa fa-check"></i><b>1.3.7</b> Construction d’un graphique</a></li>
<li class="chapter" data-level="1.3.8" data-path="01-API-intro.html"><a href="01-API-intro.html#discussion"><i class="fa fa-check"></i><b>1.3.8</b> Discussion</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="01-API-intro.html"><a href="01-API-intro.html#exercices"><i class="fa fa-check"></i><b>1.4</b> Exercices</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="01-API-intro.html"><a href="01-API-intro.html#exercice-1-utilisation-de-httr-et-jsonlite"><i class="fa fa-check"></i><b>1.4.1</b> Exercice 1 : utilisation de httr et jsonlite</a></li>
<li class="chapter" data-level="1.4.2" data-path="01-API-intro.html"><a href="01-API-intro.html#exercice-2-utilisation-du-package-insee"><i class="fa fa-check"></i><b>1.4.2</b> Exercice 2 : utilisation du package ‘insee’</a></li>
<li class="chapter" data-level="1.4.3" data-path="01-API-intro.html"><a href="01-API-intro.html#exercice-3-osrm"><i class="fa fa-check"></i><b>1.4.3</b> Exercice 3 : Osrm</a></li>
<li class="chapter" data-level="1.4.4" data-path="01-API-intro.html"><a href="01-API-intro.html#exercice-4-exploration-de-nouvelles-api"><i class="fa fa-check"></i><b>1.4.4</b> Exercice 4 : Exploration de nouvelles API</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="02-API-worldstat.html"><a href="02-API-worldstat.html"><i class="fa fa-check"></i><b>2</b> L’API Wbstats (Banque Mondiale)</a>
<ul>
<li class="chapter" data-level="2.1" data-path="02-API-worldstat.html"><a href="02-API-worldstat.html#objectifs"><i class="fa fa-check"></i><b>2.1</b> Objectifs</a></li>
<li class="chapter" data-level="2.2" data-path="02-API-worldstat.html"><a href="02-API-worldstat.html#le-tableau-countries"><i class="fa fa-check"></i><b>2.2</b> Le tableau “countries”</a></li>
<li class="chapter" data-level="2.3" data-path="02-API-worldstat.html"><a href="02-API-worldstat.html#le-tableau-indicators"><i class="fa fa-check"></i><b>2.3</b> Le tableau indicators</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="02-API-worldstat.html"><a href="02-API-worldstat.html#recherche-du-code-dun-indicateur"><i class="fa fa-check"></i><b>2.3.1</b> Recherche du code d’un indicateur</a></li>
<li class="chapter" data-level="2.3.2" data-path="02-API-worldstat.html"><a href="02-API-worldstat.html#extraction-des-métadonnées"><i class="fa fa-check"></i><b>2.3.2</b> Extraction des métadonnées</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="02-API-worldstat.html"><a href="02-API-worldstat.html#lextraction-des-données"><i class="fa fa-check"></i><b>2.4</b> L’extraction des données</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="02-API-worldstat.html"><a href="02-API-worldstat.html#le-paramètre-indicator"><i class="fa fa-check"></i><b>2.4.1</b> le paramètre <code>indicator =</code></a></li>
<li class="chapter" data-level="2.4.2" data-path="02-API-worldstat.html"><a href="02-API-worldstat.html#le-choix-dune-période-de-temps"><i class="fa fa-check"></i><b>2.4.2</b> le choix d’une période de temps</a></li>
<li class="chapter" data-level="2.4.3" data-path="02-API-worldstat.html"><a href="02-API-worldstat.html#le-choix-des-unités-géographiques"><i class="fa fa-check"></i><b>2.4.3</b> Le choix des unités géographiques</a></li>
<li class="chapter" data-level="2.4.4" data-path="02-API-worldstat.html"><a href="02-API-worldstat.html#le-format-de-sortie-du-tableau"><i class="fa fa-check"></i><b>2.4.4</b> Le format de sortie du tableau</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="02-API-worldstat.html"><a href="02-API-worldstat.html#exercices-1"><i class="fa fa-check"></i><b>2.5</b> Exercices</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="02-API-worldstat.html"><a href="02-API-worldstat.html#exercice-1"><i class="fa fa-check"></i><b>2.5.1</b> Exercice 1</a></li>
<li class="chapter" data-level="2.5.2" data-path="02-API-worldstat.html"><a href="02-API-worldstat.html#exercice-2"><i class="fa fa-check"></i><b>2.5.2</b> Exercice 2</a></li>
<li class="chapter" data-level="2.5.3" data-path="02-API-worldstat.html"><a href="02-API-worldstat.html#exercice-3"><i class="fa fa-check"></i><b>2.5.3</b> Exercice 3</a></li>
<li class="chapter" data-level="2.5.4" data-path="02-API-worldstat.html"><a href="02-API-worldstat.html#exercice-4"><i class="fa fa-check"></i><b>2.5.4</b> Exercice 4</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="03-API-worldmap.html"><a href="03-API-worldmap.html"><i class="fa fa-check"></i><b>3</b> L’API Natural Earth</a>
<ul>
<li class="chapter" data-level="3.1" data-path="03-API-worldmap.html"><a href="03-API-worldmap.html#objectifs-1"><i class="fa fa-check"></i><b>3.1</b> Objectifs</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="03-API-worldmap.html"><a href="03-API-worldmap.html#quel-fonds-de-carte-choisir"><i class="fa fa-check"></i><b>3.1.1</b> Quel fonds de carte choisir ?</a></li>
<li class="chapter" data-level="3.1.2" data-path="03-API-worldmap.html"><a href="03-API-worldmap.html#le-fonds-de-carte-countries110-175-unités"><i class="fa fa-check"></i><b>3.1.2</b> le fonds de carte <em>countries110</em> (175 unités)</a></li>
<li class="chapter" data-level="3.1.3" data-path="03-API-worldmap.html"><a href="03-API-worldmap.html#le-fonds-de-carte-sovereignty110-171-unités"><i class="fa fa-check"></i><b>3.1.3</b> le fonds de carte <em>sovereignty110</em> (171 unités)</a></li>
<li class="chapter" data-level="3.1.4" data-path="03-API-worldmap.html"><a href="03-API-worldmap.html#le-fonds-de-carte-countries50"><i class="fa fa-check"></i><b>3.1.4</b> Le fonds de carte <em>countries50</em></a></li>
<li class="chapter" data-level="3.1.5" data-path="03-API-worldmap.html"><a href="03-API-worldmap.html#autres-fonds-de-carte"><i class="fa fa-check"></i><b>3.1.5</b> Autres fonds de carte :</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="03-API-worldmap.html"><a href="03-API-worldmap.html#exemple-de-combinaison-des-api-wbstats-et-naturalearth"><i class="fa fa-check"></i><b>3.2</b> Exemple de combinaison des API wbstats et naturalearth</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="03-API-worldmap.html"><a href="03-API-worldmap.html#etape-1-récupération-des-données-statistiques"><i class="fa fa-check"></i><b>3.2.1</b> Etape 1 : récupération des données statistiques</a></li>
<li class="chapter" data-level="3.2.2" data-path="03-API-worldmap.html"><a href="03-API-worldmap.html#etape-2-récupération-du-fonds-de-carte"><i class="fa fa-check"></i><b>3.2.2</b> Etape 2 : Récupération du fonds de carte</a></li>
<li class="chapter" data-level="3.2.3" data-path="03-API-worldmap.html"><a href="03-API-worldmap.html#etape-3-jointure-du-fonds-de-carte-et-des-statistiques"><i class="fa fa-check"></i><b>3.2.3</b> Etape 3 : Jointure du fonds de carte et des statistiques</a></li>
<li class="chapter" data-level="3.2.4" data-path="03-API-worldmap.html"><a href="03-API-worldmap.html#etape-4-visualisation-avec-ggplot"><i class="fa fa-check"></i><b>3.2.4</b> Etape 4 : Visualisation avec ggplot</a></li>
<li class="chapter" data-level="3.2.5" data-path="03-API-worldmap.html"><a href="03-API-worldmap.html#etape-5-visualisation-avec-plotly"><i class="fa fa-check"></i><b>3.2.5</b> Etape 5 :Visualisation avec plotly</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="04-API-Etudiants2021.html"><a href="04-API-Etudiants2021.html"><i class="fa fa-check"></i><b>4</b> TRAVAUX D’ETUDIANTS 2021</a>
<ul>
<li class="chapter" data-level="4.1" data-path="04-API-Etudiants2021.html"><a href="04-API-Etudiants2021.html#léa-b."><i class="fa fa-check"></i><b>4.1</b> Léa B.</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="04-API-Etudiants2021.html"><a href="04-API-Etudiants2021.html#choix-de-lapi-retenue"><i class="fa fa-check"></i><b>4.1.1</b> Choix de l’API retenue</a></li>
<li class="chapter" data-level="4.1.2" data-path="04-API-Etudiants2021.html"><a href="04-API-Etudiants2021.html#création-dun-tableau"><i class="fa fa-check"></i><b>4.1.2</b> Création d’un tableau</a></li>
<li class="chapter" data-level="4.1.3" data-path="04-API-Etudiants2021.html"><a href="04-API-Etudiants2021.html#création-dune-figure"><i class="fa fa-check"></i><b>4.1.3</b> Création d’une figure</a></li>
<li class="chapter" data-level="4.1.4" data-path="04-API-Etudiants2021.html"><a href="04-API-Etudiants2021.html#conclusion"><i class="fa fa-check"></i><b>4.1.4</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="04-API-Etudiants2021.html"><a href="04-API-Etudiants2021.html#mohadji-m."><i class="fa fa-check"></i><b>4.2</b> Mohadji M.</a></li>
<li class="chapter" data-level="4.3" data-path="04-API-Etudiants2021.html"><a href="04-API-Etudiants2021.html#olha-h."><i class="fa fa-check"></i><b>4.3</b> Olha H.</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="04-API-Etudiants2021.html"><a href="04-API-Etudiants2021.html#choix-de-lapi-retenue-1"><i class="fa fa-check"></i><b>4.3.1</b> Choix de l’API retenue</a></li>
<li class="chapter" data-level="4.3.2" data-path="04-API-Etudiants2021.html"><a href="04-API-Etudiants2021.html#création-dun-tableau-1"><i class="fa fa-check"></i><b>4.3.2</b> Création d’un tableau</a></li>
<li class="chapter" data-level="4.3.3" data-path="04-API-Etudiants2021.html"><a href="04-API-Etudiants2021.html#création-dune-figure-1"><i class="fa fa-check"></i><b>4.3.3</b> Création d’une figure</a></li>
<li class="chapter" data-level="4.3.4" data-path="04-API-Etudiants2021.html"><a href="04-API-Etudiants2021.html#conclusion-1"><i class="fa fa-check"></i><b>4.3.4</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="04-API-Etudiants2021.html"><a href="04-API-Etudiants2021.html#myriam-j."><i class="fa fa-check"></i><b>4.4</b> Myriam J.</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="04-API-Etudiants2021.html"><a href="04-API-Etudiants2021.html#choix-de-lapi-retenue-2"><i class="fa fa-check"></i><b>4.4.1</b> Choix de l’API retenue</a></li>
<li class="chapter" data-level="4.4.2" data-path="04-API-Etudiants2021.html"><a href="04-API-Etudiants2021.html#création-dun-tableau-2"><i class="fa fa-check"></i><b>4.4.2</b> Création d’un tableau</a></li>
<li class="chapter" data-level="4.4.3" data-path="04-API-Etudiants2021.html"><a href="04-API-Etudiants2021.html#création-dune-figure-2"><i class="fa fa-check"></i><b>4.4.3</b> Création d’une figure</a></li>
<li class="chapter" data-level="4.4.4" data-path="04-API-Etudiants2021.html"><a href="04-API-Etudiants2021.html#conclusion-2"><i class="fa fa-check"></i><b>4.4.4</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="04-API-Etudiants2021.html"><a href="04-API-Etudiants2021.html#aswija-r."><i class="fa fa-check"></i><b>4.5</b> Aswija R.</a>
<ul>
<li class="chapter" data-level="4.5.1" data-path="04-API-Etudiants2021.html"><a href="04-API-Etudiants2021.html#choix-de-lapi-retenue-3"><i class="fa fa-check"></i><b>4.5.1</b> Choix de l’API retenue</a></li>
<li class="chapter" data-level="4.5.2" data-path="04-API-Etudiants2021.html"><a href="04-API-Etudiants2021.html#création-dun-tableau-3"><i class="fa fa-check"></i><b>4.5.2</b> Création d’un tableau</a></li>
<li class="chapter" data-level="4.5.3" data-path="04-API-Etudiants2021.html"><a href="04-API-Etudiants2021.html#création-dune-figure-3"><i class="fa fa-check"></i><b>4.5.3</b> Création d’une figure</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="04-API-Etudiants2021.html"><a href="04-API-Etudiants2021.html#youba-b."><i class="fa fa-check"></i><b>4.6</b> Youba B.</a>
<ul>
<li class="chapter" data-level="4.6.1" data-path="04-API-Etudiants2021.html"><a href="04-API-Etudiants2021.html#choix-de-lapi-retenue-4"><i class="fa fa-check"></i><b>4.6.1</b> Choix de l’API retenue</a></li>
<li class="chapter" data-level="4.6.2" data-path="04-API-Etudiants2021.html"><a href="04-API-Etudiants2021.html#création-dun-tableau-4"><i class="fa fa-check"></i><b>4.6.2</b> Création d’un tableau</a></li>
<li class="chapter" data-level="4.6.3" data-path="04-API-Etudiants2021.html"><a href="04-API-Etudiants2021.html#création-dune-figure-4"><i class="fa fa-check"></i><b>4.6.3</b> Création d’une figure</a></li>
<li class="chapter" data-level="4.6.4" data-path="04-API-Etudiants2021.html"><a href="04-API-Etudiants2021.html#conclusion-3"><i class="fa fa-check"></i><b>4.6.4</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="4.7" data-path="04-API-Etudiants2021.html"><a href="04-API-Etudiants2021.html#richard-p."><i class="fa fa-check"></i><b>4.7</b> Richard P.</a>
<ul>
<li class="chapter" data-level="4.7.1" data-path="04-API-Etudiants2021.html"><a href="04-API-Etudiants2021.html#choix-de-lapi-retenue-5"><i class="fa fa-check"></i><b>4.7.1</b> Choix de l’API retenue</a></li>
<li class="chapter" data-level="4.7.2" data-path="04-API-Etudiants2021.html"><a href="04-API-Etudiants2021.html#création-dun-tableau-5"><i class="fa fa-check"></i><b>4.7.2</b> Création d’un tableau</a></li>
<li class="chapter" data-level="4.7.3" data-path="04-API-Etudiants2021.html"><a href="04-API-Etudiants2021.html#le-graphique"><i class="fa fa-check"></i><b>4.7.3</b> Le graphique</a></li>
<li class="chapter" data-level="4.7.4" data-path="04-API-Etudiants2021.html"><a href="04-API-Etudiants2021.html#brève-analyse"><i class="fa fa-check"></i><b>4.7.4</b> Brève analyse :</a></li>
<li class="chapter" data-level="4.7.5" data-path="04-API-Etudiants2021.html"><a href="04-API-Etudiants2021.html#conclusion-4"><i class="fa fa-check"></i><b>4.7.5</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="4.8" data-path="04-API-Etudiants2021.html"><a href="04-API-Etudiants2021.html#nicolas-j."><i class="fa fa-check"></i><b>4.8</b> Nicolas J.</a>
<ul>
<li class="chapter" data-level="4.8.1" data-path="04-API-Etudiants2021.html"><a href="04-API-Etudiants2021.html#choix-de-lapi-retenue-6"><i class="fa fa-check"></i><b>4.8.1</b> Choix de l’API retenue</a></li>
<li class="chapter" data-level="4.8.2" data-path="04-API-Etudiants2021.html"><a href="04-API-Etudiants2021.html#création-dun-tableau-6"><i class="fa fa-check"></i><b>4.8.2</b> Création d’un tableau</a></li>
<li class="chapter" data-level="4.8.3" data-path="04-API-Etudiants2021.html"><a href="04-API-Etudiants2021.html#le-graphique-1"><i class="fa fa-check"></i><b>4.8.3</b> Le graphique :</a></li>
<li class="chapter" data-level="4.8.4" data-path="04-API-Etudiants2021.html"><a href="04-API-Etudiants2021.html#conclusion-5"><i class="fa fa-check"></i><b>4.8.4</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="4.9" data-path="04-API-Etudiants2021.html"><a href="04-API-Etudiants2021.html#ouali-b."><i class="fa fa-check"></i><b>4.9</b> Ouali B.</a>
<ul>
<li class="chapter" data-level="4.9.1" data-path="04-API-Etudiants2021.html"><a href="04-API-Etudiants2021.html#choix-de-lapi-retenue-7"><i class="fa fa-check"></i><b>4.9.1</b> Choix de l’API retenue</a></li>
<li class="chapter" data-level="4.9.2" data-path="04-API-Etudiants2021.html"><a href="04-API-Etudiants2021.html#création-dun-tableau-7"><i class="fa fa-check"></i><b>4.9.2</b> Création d’un tableau</a></li>
<li class="chapter" data-level="4.9.3" data-path="04-API-Etudiants2021.html"><a href="04-API-Etudiants2021.html#création-dune-figure-5"><i class="fa fa-check"></i><b>4.9.3</b> Création d’une figure</a></li>
<li class="chapter" data-level="4.9.4" data-path="04-API-Etudiants2021.html"><a href="04-API-Etudiants2021.html#conclusion-6"><i class="fa fa-check"></i><b>4.9.4</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="4.10" data-path="04-API-Etudiants2021.html"><a href="04-API-Etudiants2021.html#robinson-g."><i class="fa fa-check"></i><b>4.10</b> Robinson G.</a>
<ul>
<li class="chapter" data-level="4.10.1" data-path="04-API-Etudiants2021.html"><a href="04-API-Etudiants2021.html#choix-de-lapi-insee"><i class="fa fa-check"></i><b>4.10.1</b> Choix de l’API (Insee)</a></li>
<li class="chapter" data-level="4.10.2" data-path="04-API-Etudiants2021.html"><a href="04-API-Etudiants2021.html#création-graphique-à-partir-de-lapi"><i class="fa fa-check"></i><b>4.10.2</b> Création graphique à partir de l’api</a></li>
<li class="chapter" data-level="4.10.3" data-path="04-API-Etudiants2021.html"><a href="04-API-Etudiants2021.html#création-tableau-à-partir-de-lapi"><i class="fa fa-check"></i><b>4.10.3</b> Création tableau à partir de l’api</a></li>
<li class="chapter" data-level="4.10.4" data-path="04-API-Etudiants2021.html"><a href="04-API-Etudiants2021.html#conclusion-7"><i class="fa fa-check"></i><b>4.10.4</b> Conclusion</a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">DATA MINING</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="c02-API-worldstat" class="section level1" number="2">
<h1><span class="header-section-number">Chapitre 2</span> L’API Wbstats (Banque Mondiale)</h1>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="02-API-worldstat.html#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Global options</span></span>
<span id="cb1-2"><a href="02-API-worldstat.html#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(knitr)</span>
<span id="cb1-3"><a href="02-API-worldstat.html#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-4"><a href="02-API-worldstat.html#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb1-5"><a href="02-API-worldstat.html#cb1-5" aria-hidden="true" tabindex="-1"></a>opts_chunk<span class="sc">$</span><span class="fu">set</span>(<span class="at">echo=</span><span class="cn">TRUE</span>,</span>
<span id="cb1-6"><a href="02-API-worldstat.html#cb1-6" aria-hidden="true" tabindex="-1"></a>               <span class="at">cache=</span><span class="cn">TRUE</span>,</span>
<span id="cb1-7"><a href="02-API-worldstat.html#cb1-7" aria-hidden="true" tabindex="-1"></a>               <span class="at">prompt=</span><span class="cn">FALSE</span>,</span>
<span id="cb1-8"><a href="02-API-worldstat.html#cb1-8" aria-hidden="true" tabindex="-1"></a>               <span class="at">tidy=</span><span class="cn">FALSE</span>,</span>
<span id="cb1-9"><a href="02-API-worldstat.html#cb1-9" aria-hidden="true" tabindex="-1"></a>               <span class="at">comment=</span><span class="cn">NA</span>,</span>
<span id="cb1-10"><a href="02-API-worldstat.html#cb1-10" aria-hidden="true" tabindex="-1"></a>               <span class="at">message=</span><span class="cn">FALSE</span>,</span>
<span id="cb1-11"><a href="02-API-worldstat.html#cb1-11" aria-hidden="true" tabindex="-1"></a>               <span class="at">warning=</span><span class="cn">FALSE</span>)</span></code></pre></div>
<div id="objectifs" class="section level2" number="2.1">
<h2><span class="header-section-number">2.1</span> Objectifs</h2>
<p>Supposons que l’on souhaite télécharger la population, le PIB et les émisssions de CO2 des pays du monde de 2000 à 2015. Plutôt que d’aller chercher des fichiers sur un site web, nous allons utiliser une API proposée par la Banque Mondiale qui permet de télécharger les données facilement et surtout de les mettre à jour régulièrement. Pour cela on va installer le package R correspondant à l’API <code>wbstats</code> de la Banque mondiale.</p>
<p><a href="https://cran.r-project.org/web/packages/wbstats/vignettes/Using_the_wbstats_package.html" class="uri">https://cran.r-project.org/web/packages/wbstats/vignettes/Using_the_wbstats_package.html</a></p>
<p>Au moment du chargement du package, il est créé un fichier wb_cachelist qui fournit l’ensemble des donnes disponibles sous la forme d’une liste de tableaux de méta-données.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="02-API-worldstat.html#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;wbstats&quot;</span>)</span>
<span id="cb2-2"><a href="02-API-worldstat.html#cb2-2" aria-hidden="true" tabindex="-1"></a>cat<span class="ot">&lt;-</span>wb_cachelist</span>
<span id="cb2-3"><a href="02-API-worldstat.html#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(cat,<span class="at">max.level =</span> <span class="dv">1</span>)</span></code></pre></div>
<pre><code>List of 8
 $ countries    : tibble [304 × 18] (S3: tbl_df/tbl/data.frame)
 $ indicators   : tibble [16,649 × 8] (S3: tbl_df/tbl/data.frame)
 $ sources      : tibble [63 × 9] (S3: tbl_df/tbl/data.frame)
 $ topics       : tibble [21 × 3] (S3: tbl_df/tbl/data.frame)
 $ regions      : tibble [48 × 4] (S3: tbl_df/tbl/data.frame)
 $ income_levels: tibble [7 × 3] (S3: tbl_df/tbl/data.frame)
 $ lending_types: tibble [4 × 3] (S3: tbl_df/tbl/data.frame)
 $ languages    : tibble [23 × 3] (S3: tbl_df/tbl/data.frame)</code></pre>
</div>
<div id="le-tableau-countries" class="section level2" number="2.2">
<h2><span class="header-section-number">2.2</span> Le tableau “countries”</h2>
<p>Il fournit des renseignements de base sur les différents pays, leurs codes, etc.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="02-API-worldstat.html#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(cat<span class="sc">$</span>countries)</span></code></pre></div>
<pre><code>tibble [304 × 18] (S3: tbl_df/tbl/data.frame)
 $ iso3c             : chr [1:304] &quot;ABW&quot; &quot;AFG&quot; &quot;AFR&quot; &quot;AGO&quot; ...
 $ iso2c             : chr [1:304] &quot;AW&quot; &quot;AF&quot; &quot;A9&quot; &quot;AO&quot; ...
 $ country           : chr [1:304] &quot;Aruba&quot; &quot;Afghanistan&quot; &quot;Africa&quot; &quot;Angola&quot; ...
 $ capital_city      : chr [1:304] &quot;Oranjestad&quot; &quot;Kabul&quot; NA &quot;Luanda&quot; ...
 $ longitude         : num [1:304] -70 69.2 NA 13.2 19.8 ...
 $ latitude          : num [1:304] 12.52 34.52 NA -8.81 41.33 ...
 $ region_iso3c      : chr [1:304] &quot;LCN&quot; &quot;SAS&quot; NA &quot;SSF&quot; ...
 $ region_iso2c      : chr [1:304] &quot;ZJ&quot; &quot;8S&quot; NA &quot;ZG&quot; ...
 $ region            : chr [1:304] &quot;Latin America &amp; Caribbean&quot; &quot;South Asia&quot; &quot;Aggregates&quot; &quot;Sub-Saharan Africa&quot; ...
 $ admin_region_iso3c: chr [1:304] NA &quot;SAS&quot; NA &quot;SSA&quot; ...
 $ admin_region_iso2c: chr [1:304] NA &quot;8S&quot; NA &quot;ZF&quot; ...
 $ admin_region      : chr [1:304] NA &quot;South Asia&quot; NA &quot;Sub-Saharan Africa (excluding high income)&quot; ...
 $ income_level_iso3c: chr [1:304] &quot;HIC&quot; &quot;LIC&quot; NA &quot;LMC&quot; ...
 $ income_level_iso2c: chr [1:304] &quot;XD&quot; &quot;XM&quot; NA &quot;XN&quot; ...
 $ income_level      : chr [1:304] &quot;High income&quot; &quot;Low income&quot; &quot;Aggregates&quot; &quot;Lower middle income&quot; ...
 $ lending_type_iso3c: chr [1:304] &quot;LNX&quot; &quot;IDX&quot; NA &quot;IBD&quot; ...
 $ lending_type_iso2c: chr [1:304] &quot;XX&quot; &quot;XI&quot; NA &quot;XF&quot; ...
 $ lending_type      : chr [1:304] &quot;Not classified&quot; &quot;IDA&quot; &quot;Aggregates&quot; &quot;IBRD&quot; ...</code></pre>
<p>Le tableau comporte 304 observation et il mélange des pays (France), des fragments de pays (Réunion) et des agrégats de pays (Europe). Il faudra donc bien faire attention lors de l’extraction à réfléchir à ce que l’on souhaite utiliser. Par exemple, si l’on veut juste les pays :</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="02-API-worldstat.html#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Programme en langage R_base</span></span>
<span id="cb6-2"><a href="02-API-worldstat.html#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="co"># pays&lt;-cat$countries[cat$countries$income_level!=&quot;Aggregates&quot;,c(&quot;iso3c&quot;, &quot;country&quot;,&quot;capital_city&quot;,&quot;longitude&quot;,&quot;latitude&quot;, &quot;region&quot;,&quot;income_level&quot;)]</span></span>
<span id="cb6-3"><a href="02-API-worldstat.html#cb6-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-4"><a href="02-API-worldstat.html#cb6-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-5"><a href="02-API-worldstat.html#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="do">## Programme en langage dplyr</span></span>
<span id="cb6-6"><a href="02-API-worldstat.html#cb6-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-7"><a href="02-API-worldstat.html#cb6-7" aria-hidden="true" tabindex="-1"></a>pays <span class="ot">&lt;-</span> cat<span class="sc">$</span>countries <span class="sc">%&gt;%</span> </span>
<span id="cb6-8"><a href="02-API-worldstat.html#cb6-8" aria-hidden="true" tabindex="-1"></a>          <span class="fu">filter</span>(income_level <span class="sc">!=</span><span class="st">&quot;Aggregates&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb6-9"><a href="02-API-worldstat.html#cb6-9" aria-hidden="true" tabindex="-1"></a>          <span class="fu">select</span>(iso3c,country, capital_city, latitude, longitude, region, income_level)</span>
<span id="cb6-10"><a href="02-API-worldstat.html#cb6-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-11"><a href="02-API-worldstat.html#cb6-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-12"><a href="02-API-worldstat.html#cb6-12" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(<span class="fu">head</span>(pays))</span></code></pre></div>
<table>
<colgroup>
<col width="5%" />
<col width="19%" />
<col width="15%" />
<col width="8%" />
<col width="9%" />
<col width="24%" />
<col width="18%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">iso3c</th>
<th align="left">country</th>
<th align="left">capital_city</th>
<th align="right">latitude</th>
<th align="right">longitude</th>
<th align="left">region</th>
<th align="left">income_level</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">ABW</td>
<td align="left">Aruba</td>
<td align="left">Oranjestad</td>
<td align="right">12.51670</td>
<td align="right">-70.0167</td>
<td align="left">Latin America &amp; Caribbean</td>
<td align="left">High income</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="left">Afghanistan</td>
<td align="left">Kabul</td>
<td align="right">34.52280</td>
<td align="right">69.1761</td>
<td align="left">South Asia</td>
<td align="left">Low income</td>
</tr>
<tr class="odd">
<td align="left">AGO</td>
<td align="left">Angola</td>
<td align="left">Luanda</td>
<td align="right">-8.81155</td>
<td align="right">13.2420</td>
<td align="left">Sub-Saharan Africa</td>
<td align="left">Lower middle income</td>
</tr>
<tr class="even">
<td align="left">ALB</td>
<td align="left">Albania</td>
<td align="left">Tirane</td>
<td align="right">41.33170</td>
<td align="right">19.8172</td>
<td align="left">Europe &amp; Central Asia</td>
<td align="left">Upper middle income</td>
</tr>
<tr class="odd">
<td align="left">AND</td>
<td align="left">Andorra</td>
<td align="left">Andorra la Vella</td>
<td align="right">42.50750</td>
<td align="right">1.5218</td>
<td align="left">Europe &amp; Central Asia</td>
<td align="left">High income</td>
</tr>
<tr class="even">
<td align="left">ARE</td>
<td align="left">United Arab Emirates</td>
<td align="left">Abu Dhabi</td>
<td align="right">24.47640</td>
<td align="right">54.3705</td>
<td align="left">Middle East &amp; North Africa</td>
<td align="left">High income</td>
</tr>
</tbody>
</table>
</div>
<div id="le-tableau-indicators" class="section level2" number="2.3">
<h2><span class="header-section-number">2.3</span> Le tableau indicators</h2>
<p>Il comporte pas loin de 17000 variables … Autant dire qu’il est difficile de l’explorer facilement si l’on ne sait pas ce que l’on cherche.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="02-API-worldstat.html#cb7-1" aria-hidden="true" tabindex="-1"></a>indic<span class="ot">&lt;-</span>cat<span class="sc">$</span>indicators</span>
<span id="cb7-2"><a href="02-API-worldstat.html#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(indic)</span></code></pre></div>
<pre><code>[1] 16649     8</code></pre>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="02-API-worldstat.html#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(<span class="fu">head</span>(indic))</span></code></pre></div>
<table style="width:100%;">
<colgroup>
<col width="6%" />
<col width="11%" />
<col width="1%" />
<col width="46%" />
<col width="20%" />
<col width="5%" />
<col width="2%" />
<col width="4%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">indicator_id</th>
<th align="left">indicator</th>
<th align="left">unit</th>
<th align="left">indicator_desc</th>
<th align="left">source_org</th>
<th align="left">topics</th>
<th align="right">source_id</th>
<th align="left">source</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">1.0.HCount.1.90usd</td>
<td align="left">Poverty Headcount ($1.90 a day)</td>
<td align="left">NA</td>
<td align="left">The poverty headcount index measures the proportion of the population with daily per capita income (in 2011 PPP) below the poverty line.</td>
<td align="left">LAC Equity Lab tabulations of SEDLAC (CEDLAS and the World Bank).</td>
<td align="left">11 , Poverty</td>
<td align="right">37</td>
<td align="left">LAC Equity Lab</td>
</tr>
<tr class="even">
<td align="left">1.0.HCount.2.5usd</td>
<td align="left">Poverty Headcount ($2.50 a day)</td>
<td align="left">NA</td>
<td align="left">The poverty headcount index measures the proportion of the population with daily per capita income (in 2005 PPP) below the poverty line.</td>
<td align="left">LAC Equity Lab tabulations of SEDLAC (CEDLAS and the World Bank).</td>
<td align="left">11 , Poverty</td>
<td align="right">37</td>
<td align="left">LAC Equity Lab</td>
</tr>
<tr class="odd">
<td align="left">1.0.HCount.Mid10to50</td>
<td align="left">Middle Class ($10-50 a day) Headcount</td>
<td align="left">NA</td>
<td align="left">The poverty headcount index measures the proportion of the population with daily per capita income (in 2005 PPP) below the poverty line.</td>
<td align="left">LAC Equity Lab tabulations of SEDLAC (CEDLAS and the World Bank).</td>
<td align="left">11 , Poverty</td>
<td align="right">37</td>
<td align="left">LAC Equity Lab</td>
</tr>
<tr class="even">
<td align="left">1.0.HCount.Ofcl</td>
<td align="left">Official Moderate Poverty Rate-National</td>
<td align="left">NA</td>
<td align="left">The poverty headcount index measures the proportion of the population with daily per capita income below the official poverty line developed by each country.</td>
<td align="left">LAC Equity Lab tabulations of data from National Statistical Offices.</td>
<td align="left">11 , Poverty</td>
<td align="right">37</td>
<td align="left">LAC Equity Lab</td>
</tr>
<tr class="odd">
<td align="left">1.0.HCount.Poor4uds</td>
<td align="left">Poverty Headcount ($4 a day)</td>
<td align="left">NA</td>
<td align="left">The poverty headcount index measures the proportion of the population with daily per capita income (in 2005 PPP) below the poverty line.</td>
<td align="left">LAC Equity Lab tabulations of SEDLAC (CEDLAS and the World Bank).</td>
<td align="left">11 , Poverty</td>
<td align="right">37</td>
<td align="left">LAC Equity Lab</td>
</tr>
<tr class="even">
<td align="left">1.0.HCount.Vul4to10</td>
<td align="left">Vulnerable ($4-10 a day) Headcount</td>
<td align="left">NA</td>
<td align="left">The poverty headcount index measures the proportion of the population with daily per capita income (in 2005 PPP) below the poverty line.</td>
<td align="left">LAC Equity Lab tabulations of SEDLAC (CEDLAS and the World Bank).</td>
<td align="left">11 , Poverty</td>
<td align="right">37</td>
<td align="left">LAC Equity Lab</td>
</tr>
</tbody>
</table>
<div id="recherche-du-code-dun-indicateur" class="section level3" number="2.3.1">
<h3><span class="header-section-number">2.3.1</span> Recherche du code d’un indicateur</h3>
<p>Supposons qu’on recherche les données récentes sur les émissions de CO2. On va utiliser le mot-clé <em>CO2</em> pour rechercher les variables correspondantes dans le catalogue à l’aide de la fonction <code>wbsearch</code>, ce qui donne 45 réponses</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="02-API-worldstat.html#cb10-1" aria-hidden="true" tabindex="-1"></a>vars <span class="ot">&lt;-</span> <span class="fu">wb_search</span>(<span class="at">pattern =</span> <span class="st">&quot;CO2&quot;</span>,<span class="at">fields=</span><span class="st">&quot;indicator&quot;</span>)</span>
<span id="cb10-2"><a href="02-API-worldstat.html#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(vars)</span></code></pre></div>
<table>
<colgroup>
<col width="0%" />
<col width="5%" />
<col width="93%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">indicator_id</th>
<th align="left">indicator</th>
<th align="left">indicator_desc</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">EN.ATM.CO2E.CP.KT</td>
<td align="left">CO2 emissions from cement production (thousand metric tons)</td>
<td align="left">Carbon dioxide emissions from cement production refer mainly to emissions during cement production. Cement production is a multi-step process and CO2 is actually released from klinker production during the cement production process. The U.S. Department of Energy’s carbon Dioxide Information Analysis Center (CDIAC) calculates annual anthropogenic emissions from data on fossil fuel consumption (from the United Nations Statistics Division’s World Energy Data Set) and world cement manufacturing (from the U.S. Bureau of Mine’s Cement Manufacturing Data Set). Carbon dioxide emissions, often calculated and reported as elemental carbon, were converted to actual carbon dioxide mass by multiplying them by 3.664 (the ratio of the mass of carbon to that of carbon dioxide). Although estimates of global carbon dioxide emissions are probably accurate within 10 percent (as calculated from global average file chemistry and use), country estimates may have larger error bounds. Trends estimated from a consistent time series tend to be more accurate than individual values. Each year the CDIAC recalculates the entire time series since 1949, incorporating recent findings and corrections. Estimates exclude fuels supplied to ships and aircraft in international transport because of the difficulty of apportioning he fuels among benefitting countries. The ratio of carbon dioxide per unit of energy shows carbon intensity, which is the amount of carbon dioxide emitted as a result of using one unit of energy in the process of production.</td>
</tr>
<tr class="even">
<td align="left">EN.ATM.CO2E.EG.ZS</td>
<td align="left">CO2 intensity (kg per kg of oil equivalent energy use)</td>
<td align="left">Carbon dioxide emissions from solid fuel consumption refer mainly to emissions from use of coal as an energy source.</td>
</tr>
<tr class="odd">
<td align="left">EN.ATM.CO2E.FF.KT</td>
<td align="left">CO2 emissions from fossil-fuels, total (thousand metric tons)</td>
<td align="left">Fossil fuel is any hydrocarbon deposit that can be burned for heat or power, such as petroleum, coal, and natural gas. This is the sum total of all fossil fuel emissions (solid fuel consumption, liquid fuel consumption, gas fuel consumption, cement production and gas flaring). The U.S. Department of Energy’s carbon Dioxide Information Analysis Center (CDIAC) calculates annual anthropogenic emissions from data on fossil fuel consumption (from the United Nations Statistics Division’s World Energy Data Set) and world cement manufacturing (from the U.S. Bureau of Mine’s Cement Manufacturing Data Set). Carbon dioxide emissions, often calculated and reported as elemental carbon, were converted to actual carbon dioxide mass by multiplying them by 3.664 (the ratio of the mass of carbon to that of carbon dioxide). Although estimates of global carbon dioxide emissions are probably accurate within 10 percent (as calculated from global average file chemistry and use), country estimates may have larger error bounds. Trends estimated from a consistent time series tend to be more accurate than individual values. Each year the CDIAC recalculates the entire time series since 1949, incorporating recent findings and corrections. Estimates exclude fuels supplied to ships and aircraft in international transport because of the difficulty of apportioning he fuels among benefitting countries. The ratio of carbon dioxide per unit of energy shows carbon intensity, which is the amount of carbon dioxide emitted as a result of using one unit of energy in the process of production.</td>
</tr>
<tr class="even">
<td align="left">EN.ATM.CO2E.FF.ZS</td>
<td align="left">CO2 emissions from fossil-fuels (% of total)</td>
<td align="left">Fossil fuel is any hydrocarbon deposit that can be burned for heat or power, such as petroleum, coal, and natural gas. This is the sum total of all fossil fuel emissions (solid fuel consumption, liquid fuel consumption, gas fuel consumption, cement production and gas flaring).</td>
</tr>
<tr class="odd">
<td align="left">EN.ATM.CO2E.GF.KT</td>
<td align="left">CO2 emissions from gaseous fuel consumption (kt)</td>
<td align="left">Carbon dioxide emissions from liquid fuel consumption refer mainly to emissions from use of natural gas as an energy source.</td>
</tr>
<tr class="even">
<td align="left">EN.ATM.CO2E.GF.ZS</td>
<td align="left">CO2 emissions from gaseous fuel consumption (% of total)</td>
<td align="left">Carbon dioxide emissions from liquid fuel consumption refer mainly to emissions from use of natural gas as an energy source.</td>
</tr>
<tr class="odd">
<td align="left">EN.ATM.CO2E.GL.KT</td>
<td align="left">CO2 emissions from gas flaring (thousand metric tons)</td>
<td align="left">Carbon dioxide emissions from gas flaring fuel consumption refer mainly to emissions from gas flaring activities.</td>
</tr>
<tr class="even">
<td align="left">EN.ATM.CO2E.KD.GD</td>
<td align="left">CO2 emissions (kg per 2010 US$ of GDP)</td>
<td align="left">Carbon dioxide emissions are those stemming from the burning of fossil fuels and the manufacture of cement. They include carbon dioxide produced during consumption of solid, liquid, and gas fuels and gas flaring.</td>
</tr>
<tr class="odd">
<td align="left">EN.ATM.CO2E.KT</td>
<td align="left">CO2 emissions (kt)</td>
<td align="left">Carbon dioxide emissions are those stemming from the burning of fossil fuels and the manufacture of cement. They include carbon dioxide produced during consumption of solid, liquid, and gas fuels and gas flaring.</td>
</tr>
<tr class="even">
<td align="left">EN.ATM.CO2E.LF.KT</td>
<td align="left">CO2 emissions from liquid fuel consumption (kt)</td>
<td align="left">Carbon dioxide emissions from liquid fuel consumption refer mainly to emissions from use of petroleum-derived fuels as an energy source.</td>
</tr>
<tr class="odd">
<td align="left">EN.ATM.CO2E.LF.ZS</td>
<td align="left">CO2 emissions from liquid fuel consumption (% of total)</td>
<td align="left">Carbon dioxide emissions from liquid fuel consumption refer mainly to emissions from use of petroleum-derived fuels as an energy source.</td>
</tr>
<tr class="even">
<td align="left">EN.ATM.CO2E.PC</td>
<td align="left">CO2 emissions (metric tons per capita)</td>
<td align="left">Carbon dioxide emissions are those stemming from the burning of fossil fuels and the manufacture of cement. They include carbon dioxide produced during consumption of solid, liquid, and gas fuels and gas flaring.</td>
</tr>
<tr class="odd">
<td align="left">EN.ATM.CO2E.PP.GD</td>
<td align="left">CO2 emissions (kg per PPP $ of GDP)</td>
<td align="left">Carbon dioxide emissions are those stemming from the burning of fossil fuels and the manufacture of cement. They include carbon dioxide produced during consumption of solid, liquid, and gas fuels and gas flaring.</td>
</tr>
<tr class="even">
<td align="left">EN.ATM.CO2E.PP.GD.KD</td>
<td align="left">CO2 emissions (kg per 2017 PPP $ of GDP)</td>
<td align="left">Carbon dioxide emissions are those stemming from the burning of fossil fuels and the manufacture of cement. They include carbon dioxide produced during consumption of solid, liquid, and gas fuels and gas flaring.</td>
</tr>
<tr class="odd">
<td align="left">EN.ATM.CO2E.SF.KT</td>
<td align="left">CO2 emissions from solid fuel consumption (kt)</td>
<td align="left">Carbon dioxide emissions from solid fuel consumption refer mainly to emissions from use of coal as an energy source.</td>
</tr>
<tr class="even">
<td align="left">EN.ATM.CO2E.SF.ZS</td>
<td align="left">CO2 emissions from solid fuel consumption (% of total)</td>
<td align="left">Carbon dioxide emissions from solid fuel consumption refer mainly to emissions from use of coal as an energy source.</td>
</tr>
<tr class="odd">
<td align="left">EN.ATM.GHGO.KT.CE</td>
<td align="left">Other greenhouse gas emissions, HFC, PFC and SF6 (thousand metric tons of CO2 equivalent)</td>
<td align="left">Other greenhouse gas emissions are by-product emissions of hydrofluorocarbons, perfluorocarbons, and sulfur hexafluoride.</td>
</tr>
<tr class="even">
<td align="left">EN.ATM.GHGT.KT.CE</td>
<td align="left">Total greenhouse gas emissions (kt of CO2 equivalent)</td>
<td align="left">Total greenhouse gas emissions in kt of CO2 equivalent are composed of CO2 totals excluding short-cycle biomass burning (such as agricultural waste burning and savanna burning) but including other biomass burning (such as forest fires, post-burn decay, peat fires and decay of drained peatlands), all anthropogenic CH4 sources, N2O sources and F-gases (HFCs, PFCs and SF6).</td>
</tr>
<tr class="odd">
<td align="left">EN.ATM.HFCG.KT.CE</td>
<td align="left">HFC gas emissions (thousand metric tons of CO2 equivalent)</td>
<td align="left">Hydrofluorocarbons, used as a replacement for chlorofluorocarbons, are used mainly in refrigeration and semiconductor manufacturing.</td>
</tr>
<tr class="even">
<td align="left">EN.ATM.METH.AG.KT.CE</td>
<td align="left">Agricultural methane emissions (thousand metric tons of CO2 equivalent)</td>
<td align="left">Agricultural methane emissions are emissions from animals, animal waste, rice production, agricultural waste burning (nonenergy, on-site), and savanna burning.</td>
</tr>
<tr class="odd">
<td align="left">EN.ATM.METH.EG.KT.CE</td>
<td align="left">Methane emissions in energy sector (thousand metric tons of CO2 equivalent)</td>
<td align="left">Methane emissions from energy processes are emissions from the production, handling, transmission, and combustion of fossil fuels and biofuels.</td>
</tr>
<tr class="even">
<td align="left">EN.ATM.METH.KT.CE</td>
<td align="left">Methane emissions (kt of CO2 equivalent)</td>
<td align="left">Methane emissions are those stemming from human activities such as agriculture and from industrial methane production.</td>
</tr>
<tr class="odd">
<td align="left">EN.ATM.NOXE.AG.KT.CE</td>
<td align="left">Agricultural nitrous oxide emissions (thousand metric tons of CO2 equivalent)</td>
<td align="left">Agricultural nitrous oxide emissions are emissions produced through fertilizer use (synthetic and animal manure), animal waste management, agricultural waste burning (nonenergy, on-site), and savanna burning.</td>
</tr>
<tr class="even">
<td align="left">EN.ATM.NOXE.EG.KT.CE</td>
<td align="left">Nitrous oxide emissions in energy sector (thousand metric tons of CO2 equivalent)</td>
<td align="left">Nitrous oxide emissions from energy processes are emissions produced by the combustion of fossil fuels and biofuels.</td>
</tr>
<tr class="odd">
<td align="left">EN.ATM.NOXE.KT.CE</td>
<td align="left">Nitrous oxide emissions (thousand metric tons of CO2 equivalent)</td>
<td align="left">Nitrous oxide emissions are emissions from agricultural biomass burning, industrial activities, and livestock management.</td>
</tr>
<tr class="even">
<td align="left">EN.ATM.PFCG.KT.CE</td>
<td align="left">PFC gas emissions (thousand metric tons of CO2 equivalent)</td>
<td align="left">Perfluorocarbons, used as a replacement for chlorofluorocarbons in manufacturing semiconductors, are a byproduct of aluminum smelting and uranium enrichment.</td>
</tr>
<tr class="odd">
<td align="left">EN.ATM.SF6G.KT.CE</td>
<td align="left">SF6 gas emissions (thousand metric tons of CO2 equivalent)</td>
<td align="left">Sulfur hexafluoride is used largely to insulate high-voltage electric power equipment.</td>
</tr>
<tr class="even">
<td align="left">EN.CLC.GHGR.MT.CE</td>
<td align="left">GHG net emissions/removals by LUCF (Mt of CO2 equivalent)</td>
<td align="left">GHG net emissions/removals by LUCF refers to changes in atmospheric levels of all greenhouse gases attributable to forest and land-use change activities, including but not limited to (1) emissions and removals of CO2 from decreases or increases in biomass stocks due to forest management, logging, fuelwood collection, etc.; (2) conversion of existing forests and natural grasslands to other land uses; (3) removal of CO2 from the abandonment of formerly managed lands (e.g. croplands and pastures); and (4) emissions and removals of CO2 in soil associated with land-use change and management. For Annex-I countries under the UNFCCC, these data are drawn from the annual GHG inventories submitted to the UNFCCC by each country; for non-Annex-I countries, data are drawn from the most recently submitted National Communication where available. Because of differences in reporting years and methodologies, these data are not generally considered comparable across countries. Data are in million metric tons.</td>
</tr>
<tr class="odd">
<td align="left">EN.CO2.BLDG.ZS</td>
<td align="left">CO2 emissions from residential buildings and commercial and public services (% of total fuel combustion)</td>
<td align="left">CO2 emissions from residential buildings and commercial and public services contains all emissions from fuel combustion in households. This corresponds to IPCC Source/Sink Category 1 A 4 b. Commercial and public services includes emissions from all activities of ISIC Divisions 41, 50-52, 55, 63-67, 70-75, 80, 85, 90-93 and 99.</td>
</tr>
<tr class="even">
<td align="left">EN.CO2.ETOT.ZS</td>
<td align="left">CO2 emissions from electricity and heat production, total (% of total fuel combustion)</td>
<td align="left">CO2 emissions from electricity and heat production is the sum of three IEA categories of CO2 emissions: (1) Main Activity Producer Electricity and Heat which contains the sum of emissions from main activity producer electricity generation, combined heat and power generation and heat plants. Main activity producers (formerly known as public utilities) are defined as those undertakings whose primary activity is to supply the public. They may be publicly or privately owned. This corresponds to IPCC Source/Sink Category 1 A 1 a. For the CO2 emissions from fuel combustion (summary) file, emissions from own on-site use of fuel in power plants (EPOWERPLT) are also included. (2) Unallocated Autoproducers which contains the emissions from the generation of electricity and/or heat by autoproducers. Autoproducers are defined as undertakings that generate electricity and/or heat, wholly or partly for their own use as an activity which supports their primary activity. They may be privately or publicly owned. In the 1996 IPCC Guidelines, these emissions would normally be distributed between industry, transport and “other” sectors. (3) Other Energy Industries contains emissions from fuel combusted in petroleum refineries, for the manufacture of solid fuels, coal mining, oil and gas extraction and other energy-producing industries. This corresponds to the IPCC Source/Sink Categories 1 A 1 b and 1 A 1 c. According to the 1996 IPCC Guidelines, emissions from coke inputs to blast furnaces can either be counted here or in the Industrial Processes source/sink category. Within detailed sectoral calculations, certain non-energy processes can be distinguished. In the reduction of iron in a blast furnace through the combustion of coke, the primary purpose of the coke oxidation is to produce pig iron and the emissions can be considered as an industrial process. Care must be taken not to double count these emissions in both Energy and Industrial Processes. In the IEA estimations, these emissions have been included in this category.</td>
</tr>
<tr class="odd">
<td align="left">EN.CO2.MANF.ZS</td>
<td align="left">CO2 emissions from manufacturing industries and construction (% of total fuel combustion)</td>
<td align="left">CO2 emissions from manufacturing industries and construction contains the emissions from combustion of fuels in industry. The IPCC Source/Sink Category 1 A 2 includes these emissions. However, in the 1996 IPCC Guidelines, the IPCC category also includes emissions from industry autoproducers that generate electricity and/or heat. The IEA data are not collected in a way that allows the energy consumption to be split by specific end-use and therefore, autoproducers are shown as a separate item (Unallocated Autoproducers). Manufacturing industries and construction also includes emissions from coke inputs into blast furnaces, which may be reported either in the transformation sector, the industry sector or the separate IPCC Source/Sink Category 2, Industrial Processes.</td>
</tr>
<tr class="even">
<td align="left">EN.CO2.OTHX.ZS</td>
<td align="left">CO2 emissions from other sectors, excluding residential buildings and commercial and public services (% of total fuel combustion)</td>
<td align="left">CO2 emissions from other sectors, less residential buildings and commercial and public services, contains the emissions from commercial/institutional activities, residential, agriculture/forestry, fishing and other emissions not specified elsewhere that are included in the IPCC Source/Sink Categories 1 A 4 and 1 A 5. In the 1996 IPCC Guidelines, the category also includes emissions from autoproducers in the commercial/residential/agricultural sectors that generate electricity and/or heat. The IEA data are not collected in a way that allows the energy consumption to be split by specific end-use and therefore, autoproducers are shown as a separate item (Unallocated Autoproducers).</td>
</tr>
<tr class="odd">
<td align="left">EN.CO2.TRAN.ZS</td>
<td align="left">CO2 emissions from transport (% of total fuel combustion)</td>
<td align="left">CO2 emissions from transport contains emissions from the combustion of fuel for all transport activity, regardless of the sector, except for international marine bunkers and international aviation. This includes domestic aviation, domestic navigation, road, rail and pipeline transport, and corresponds to IPCC Source/Sink Category 1 A 3. In addition, the IEA data are not collected in a way that allows the autoproducer consumption to be split by specific end-use and therefore, autoproducers are shown as a separate item (Unallocated Autoproducers).</td>
</tr>
<tr class="even">
<td align="left">IN.ENV.CO2.CONC</td>
<td align="left">CO2 Emission (in thousand metric tons of Carbon)</td>
<td align="left">NA</td>
</tr>
</tbody>
</table>
<p>On va finalement trouver le code de la variable recherchée</p>
<ul>
<li><em>EN.ATM.CO2E.KT</em> : émissions de CO2 en kilotonnes</li>
</ul>
<p>Les deux autres variables dont nous avons besoin ont pour code</p>
<ul>
<li><em>NY.GDP.MKTP.CD</em> : PIB en parités de pouvoir d’achat</li>
<li><em>SP.POP.TOTL</em> : Population totale</li>
</ul>
</div>
<div id="extraction-des-métadonnées" class="section level3" number="2.3.2">
<h3><span class="header-section-number">2.3.2</span> Extraction des métadonnées</h3>
<p>Une fois que l’on pense connaître le code de nos variables, on peut extraire les métadonnés pour vérifier qu’il s’agit bien de ce que l’on cherche, quelle est la source exacte, quelle est l’unité de mesure …</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="02-API-worldstat.html#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Programme R-base</span></span>
<span id="cb11-2"><a href="02-API-worldstat.html#cb11-2" aria-hidden="true" tabindex="-1"></a>meta<span class="ot">&lt;-</span>cat<span class="sc">$</span>indicators[cat<span class="sc">$</span>indicators<span class="sc">$</span>indicator_id <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;SP.POP.TOTL&quot;</span>,<span class="st">&quot;NY.GDP.MKTP.CD&quot;</span>,<span class="st">&quot;EN.ATM.CO2E.KT&quot;</span>),]</span>
<span id="cb11-3"><a href="02-API-worldstat.html#cb11-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-4"><a href="02-API-worldstat.html#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Programme dplyr</span></span>
<span id="cb11-5"><a href="02-API-worldstat.html#cb11-5" aria-hidden="true" tabindex="-1"></a>meta<span class="ot">&lt;-</span>cat<span class="sc">$</span>indicators <span class="sc">%&gt;%</span></span>
<span id="cb11-6"><a href="02-API-worldstat.html#cb11-6" aria-hidden="true" tabindex="-1"></a>        <span class="fu">filter</span>(indicator_id <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;SP.POP.TOTL&quot;</span>,<span class="st">&quot;NY.GDP.MKTP.CD&quot;</span>,<span class="st">&quot;EN.ATM.CO2E.KT&quot;</span>))</span>
<span id="cb11-7"><a href="02-API-worldstat.html#cb11-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-8"><a href="02-API-worldstat.html#cb11-8" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(meta)</span></code></pre></div>
<table>
<colgroup>
<col width="1%" />
<col width="1%" />
<col width="0%" />
<col width="52%" />
<col width="35%" />
<col width="4%" />
<col width="0%" />
<col width="2%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">indicator_id</th>
<th align="left">indicator</th>
<th align="left">unit</th>
<th align="left">indicator_desc</th>
<th align="left">source_org</th>
<th align="left">topics</th>
<th align="right">source_id</th>
<th align="left">source</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">EN.ATM.CO2E.KT</td>
<td align="left">CO2 emissions (kt)</td>
<td align="left">NA</td>
<td align="left">Carbon dioxide emissions are those stemming from the burning of fossil fuels and the manufacture of cement. They include carbon dioxide produced during consumption of solid, liquid, and gas fuels and gas flaring.</td>
<td align="left">Carbon Dioxide Information Analysis Center, Environmental Sciences Division, Oak Ridge National Laboratory, Tennessee, United States.</td>
<td align="left">19 , 6 , Climate Change, Environment</td>
<td align="right">2</td>
<td align="left">World Development Indicators</td>
</tr>
<tr class="even">
<td align="left">NY.GDP.MKTP.CD</td>
<td align="left">GDP (current US$)</td>
<td align="left">NA</td>
<td align="left">GDP at purchaser’s prices is the sum of gross value added by all resident producers in the economy plus any product taxes and minus any subsidies not included in the value of the products. It is calculated without making deductions for depreciation of fabricated assets or for depletion and degradation of natural resources. Data are in current U.S. dollars. Dollar figures for GDP are converted from domestic currencies using single year official exchange rates. For a few countries where the official exchange rate does not reflect the rate effectively applied to actual foreign exchange transactions, an alternative conversion factor is used.</td>
<td align="left">World Bank national accounts data, and OECD National Accounts data files.</td>
<td align="left">3 , Economy &amp; Growth</td>
<td align="right">2</td>
<td align="left">World Development Indicators</td>
</tr>
<tr class="odd">
<td align="left">SP.POP.TOTL</td>
<td align="left">Population, total</td>
<td align="left">NA</td>
<td align="left">Total population is based on the de facto definition of population, which counts all residents regardless of legal status or citizenship. The values shown are midyear estimates.</td>
<td align="left">(1) United Nations Population Division. World Population Prospects: 2019 Revision. (2) Census reports and other statistical publications from national statistical offices, (3) Eurostat: Demographic Statistics, (4) United Nations Statistical Division. Population and Vital Statistics Reprot (various years), (5) U.S. Census Bureau: International Database, and (6) Secretariat of the Pacific Community: Statistics and Demography Programme.</td>
<td align="left">19 , 8 , Climate Change, Health</td>
<td align="right">2</td>
<td align="left">World Development Indicators</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="lextraction-des-données" class="section level2" number="2.4">
<h2><span class="header-section-number">2.4</span> L’extraction des données</h2>
<p>Elle se fait à l’aide de la fonction <code>wb_data</code> qui comporte de nombreuses options.</p>
<div id="le-paramètre-indicator" class="section level3" number="2.4.1">
<h3><span class="header-section-number">2.4.1</span> le paramètre <code>indicator =</code></h3>
<p>Ce paramètre permet de choisir les indicateurs à collecter, ce qui suppose que l’on connaisse leur code. Par exemple, supposons que l’on veuille extraire la population et le PIB pour pouvoir calculer ensuite le PIB par habitant</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="02-API-worldstat.html#cb12-1" aria-hidden="true" tabindex="-1"></a>df   <span class="ot">&lt;-</span> <span class="fu">wb_data</span>(<span class="at">indicator  =</span> <span class="fu">c</span>(<span class="st">&quot;NY.GDP.MKTP.CD&quot;</span>,<span class="st">&quot;SP.POP.TOTL&quot;</span>))</span>
<span id="cb12-2"><a href="02-API-worldstat.html#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(df)</span></code></pre></div>
<pre><code>[1] 13237     6</code></pre>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="02-API-worldstat.html#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(<span class="fu">head</span>(df,<span class="dv">6</span>))</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">iso2c</th>
<th align="left">iso3c</th>
<th align="left">country</th>
<th align="right">date</th>
<th align="right">NY.GDP.MKTP.CD</th>
<th align="right">SP.POP.TOTL</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">AW</td>
<td align="left">ABW</td>
<td align="left">Aruba</td>
<td align="right">1960</td>
<td align="right">NA</td>
<td align="right">54208</td>
</tr>
<tr class="even">
<td align="left">AW</td>
<td align="left">ABW</td>
<td align="left">Aruba</td>
<td align="right">1961</td>
<td align="right">NA</td>
<td align="right">55434</td>
</tr>
<tr class="odd">
<td align="left">AW</td>
<td align="left">ABW</td>
<td align="left">Aruba</td>
<td align="right">1962</td>
<td align="right">NA</td>
<td align="right">56234</td>
</tr>
<tr class="even">
<td align="left">AW</td>
<td align="left">ABW</td>
<td align="left">Aruba</td>
<td align="right">1963</td>
<td align="right">NA</td>
<td align="right">56699</td>
</tr>
<tr class="odd">
<td align="left">AW</td>
<td align="left">ABW</td>
<td align="left">Aruba</td>
<td align="right">1964</td>
<td align="right">NA</td>
<td align="right">57029</td>
</tr>
<tr class="even">
<td align="left">AW</td>
<td align="left">ABW</td>
<td align="left">Aruba</td>
<td align="right">1965</td>
<td align="right">NA</td>
<td align="right">57357</td>
</tr>
</tbody>
</table>
<ul>
<li><strong>commentaire</strong> : Nous obtenons un tableau très grand (&gt; 13000 lignes) qui comporte les valeurs pour toutes les dates disponibles depuis 1960 et pour tous les pays, même si les valeurs sont souvent manquantes.</li>
</ul>
</div>
<div id="le-choix-dune-période-de-temps" class="section level3" number="2.4.2">
<h3><span class="header-section-number">2.4.2</span> le choix d’une période de temps</h3>
<div id="les-paramètres-startdate-et-startdate" class="section level4" number="2.4.2.1">
<h4><span class="header-section-number">2.4.2.1</span> les paramètres <code>startdate =</code> et <code>startdate =</code></h4>
<p>Ces deux paramètres permettent de choisir une plage de temps. On peut par exemple décider de ne collecter que les données relatives aux années 2014, 2015 et 2016</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="02-API-worldstat.html#cb15-1" aria-hidden="true" tabindex="-1"></a>df   <span class="ot">&lt;-</span> <span class="fu">wb_data</span>(<span class="at">indicator  =</span> <span class="fu">c</span>(<span class="st">&quot;NY.GDP.MKTP.CD&quot;</span>,<span class="st">&quot;SP.POP.TOTL&quot;</span>),</span>
<span id="cb15-2"><a href="02-API-worldstat.html#cb15-2" aria-hidden="true" tabindex="-1"></a>                <span class="at">start_date =</span> <span class="dv">2014</span>,</span>
<span id="cb15-3"><a href="02-API-worldstat.html#cb15-3" aria-hidden="true" tabindex="-1"></a>                <span class="at">end_date =</span> <span class="dv">2016</span>)</span>
<span id="cb15-4"><a href="02-API-worldstat.html#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(df)</span></code></pre></div>
<pre><code>[1] 651   6</code></pre>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="02-API-worldstat.html#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(<span class="fu">head</span>(df,<span class="dv">6</span>))</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">iso2c</th>
<th align="left">iso3c</th>
<th align="left">country</th>
<th align="right">date</th>
<th align="right">NY.GDP.MKTP.CD</th>
<th align="right">SP.POP.TOTL</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">AW</td>
<td align="left">ABW</td>
<td align="left">Aruba</td>
<td align="right">2014</td>
<td align="right">2790849162</td>
<td align="right">103776</td>
</tr>
<tr class="even">
<td align="left">AW</td>
<td align="left">ABW</td>
<td align="left">Aruba</td>
<td align="right">2015</td>
<td align="right">2962905028</td>
<td align="right">104339</td>
</tr>
<tr class="odd">
<td align="left">AW</td>
<td align="left">ABW</td>
<td align="left">Aruba</td>
<td align="right">2016</td>
<td align="right">2983636872</td>
<td align="right">104865</td>
</tr>
<tr class="even">
<td align="left">AF</td>
<td align="left">AFG</td>
<td align="left">Afghanistan</td>
<td align="right">2014</td>
<td align="right">20497126770</td>
<td align="right">33370804</td>
</tr>
<tr class="odd">
<td align="left">AF</td>
<td align="left">AFG</td>
<td align="left">Afghanistan</td>
<td align="right">2015</td>
<td align="right">19134211764</td>
<td align="right">34413603</td>
</tr>
<tr class="even">
<td align="left">AF</td>
<td align="left">AFG</td>
<td align="left">Afghanistan</td>
<td align="right">2016</td>
<td align="right">18116562465</td>
<td align="right">35383028</td>
</tr>
</tbody>
</table>
<ul>
<li><strong>commentaire</strong> : Le tableau ne comporte donc plus que 651 lignes correspondant aux trois dates pour les différents pays du Monde.</li>
</ul>
</div>
<div id="le-paramètre-mrv-most-recent-value" class="section level4" number="2.4.2.2">
<h4><span class="header-section-number">2.4.2.2</span> Le paramètre <code>mrv</code> (most recent value)</h4>
<p>Lorsque l’on souhaite juste obtenir les données les plus récentes, on peut remplacer les paramètres <code>startdate =</code> et <code>startdate =</code> par le paramètre <code>mrv =</code> suivit d’un chiffre indiquant le nombre d’années que l’on souhaite à partir de la date la plus récente. Avec mrv=1 on récupère uniquement la dernière année disponible pour au moins l’une des variables.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="02-API-worldstat.html#cb18-1" aria-hidden="true" tabindex="-1"></a>df   <span class="ot">&lt;-</span> <span class="fu">wb_data</span>(<span class="at">indicator  =</span> <span class="fu">c</span>(<span class="st">&quot;NY.GDP.MKTP.CD&quot;</span>,<span class="st">&quot;SP.POP.TOTL&quot;</span>),</span>
<span id="cb18-2"><a href="02-API-worldstat.html#cb18-2" aria-hidden="true" tabindex="-1"></a>                <span class="at">mrv =</span> <span class="dv">1</span>)</span>
<span id="cb18-3"><a href="02-API-worldstat.html#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(df)</span></code></pre></div>
<pre><code>[1] 217   6</code></pre>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="02-API-worldstat.html#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(<span class="fu">head</span>(df,<span class="dv">6</span>))</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">iso2c</th>
<th align="left">iso3c</th>
<th align="left">country</th>
<th align="right">date</th>
<th align="right">NY.GDP.MKTP.CD</th>
<th align="right">SP.POP.TOTL</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">AW</td>
<td align="left">ABW</td>
<td align="left">Aruba</td>
<td align="right">2020</td>
<td align="right">NA</td>
<td align="right">106766</td>
</tr>
<tr class="even">
<td align="left">AF</td>
<td align="left">AFG</td>
<td align="left">Afghanistan</td>
<td align="right">2020</td>
<td align="right">20116137326</td>
<td align="right">38928341</td>
</tr>
<tr class="odd">
<td align="left">AO</td>
<td align="left">AGO</td>
<td align="left">Angola</td>
<td align="right">2020</td>
<td align="right">58375976293</td>
<td align="right">32866268</td>
</tr>
<tr class="even">
<td align="left">AL</td>
<td align="left">ALB</td>
<td align="left">Albania</td>
<td align="right">2020</td>
<td align="right">14887629268</td>
<td align="right">2837743</td>
</tr>
<tr class="odd">
<td align="left">AD</td>
<td align="left">AND</td>
<td align="left">Andorra</td>
<td align="right">2020</td>
<td align="right">NA</td>
<td align="right">77265</td>
</tr>
<tr class="even">
<td align="left">AE</td>
<td align="left">ARE</td>
<td align="left">United Arab Emirates</td>
<td align="right">2020</td>
<td align="right">358868765175</td>
<td align="right">9890400</td>
</tr>
</tbody>
</table>
<p>L’inconvénient de cette méthode est que cela peut aboutir à un grand nombre de valeurs manquantes si l’une des variables recherchée n’a pas été mise à jour. Par exemple, la variable relative au CO2 n’est pas disponible après 2016 et du coup le tableau va mélanger des dates différentes.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="02-API-worldstat.html#cb21-1" aria-hidden="true" tabindex="-1"></a>df   <span class="ot">&lt;-</span> <span class="fu">wb_data</span>(<span class="at">indicator  =</span> <span class="fu">c</span>(<span class="st">&quot;NY.GDP.MKTP.CD&quot;</span>,<span class="st">&quot;SP.POP.TOTL&quot;</span>,<span class="st">&quot;EN.ATM.CO2E.KT&quot;</span> ),</span>
<span id="cb21-2"><a href="02-API-worldstat.html#cb21-2" aria-hidden="true" tabindex="-1"></a>                <span class="at">mrv =</span><span class="dv">1</span>)</span>
<span id="cb21-3"><a href="02-API-worldstat.html#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(df)</span></code></pre></div>
<pre><code>[1] 434   7</code></pre>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="02-API-worldstat.html#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(<span class="fu">head</span>(df,<span class="dv">6</span>))</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">iso2c</th>
<th align="left">iso3c</th>
<th align="left">country</th>
<th align="right">date</th>
<th align="right">EN.ATM.CO2E.KT</th>
<th align="right">NY.GDP.MKTP.CD</th>
<th align="right">SP.POP.TOTL</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">AW</td>
<td align="left">ABW</td>
<td align="left">Aruba</td>
<td align="right">2018</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="left">AW</td>
<td align="left">ABW</td>
<td align="left">Aruba</td>
<td align="right">2020</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">106766</td>
</tr>
<tr class="odd">
<td align="left">AF</td>
<td align="left">AFG</td>
<td align="left">Afghanistan</td>
<td align="right">2018</td>
<td align="right">7440</td>
<td align="right">NA</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="left">AF</td>
<td align="left">AFG</td>
<td align="left">Afghanistan</td>
<td align="right">2020</td>
<td align="right">NA</td>
<td align="right">20116137326</td>
<td align="right">38928341</td>
</tr>
<tr class="odd">
<td align="left">AO</td>
<td align="left">AGO</td>
<td align="left">Angola</td>
<td align="right">2018</td>
<td align="right">27340</td>
<td align="right">NA</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="left">AO</td>
<td align="left">AGO</td>
<td align="left">Angola</td>
<td align="right">2020</td>
<td align="right">NA</td>
<td align="right">58375976293</td>
<td align="right">32866268</td>
</tr>
</tbody>
</table>
<p>Il est donc préférable de sélectioner une période plus longue mrv=5 et de faire ensuite soi-même le tri :</p>
</div>
</div>
<div id="le-choix-des-unités-géographiques" class="section level3" number="2.4.3">
<h3><span class="header-section-number">2.4.3</span> Le choix des unités géographiques</h3>
<p>Le paramètre <code>country =</code> permet de choisir les entités spatiales à collecter, soit sous forme de liste de codes, soit à l’aide de valeurs spéciales. Par défaut; il renvoie la liste de tous les pays, mais on peut se limiter à quelques uns seulement à l’aide de leur nom en anglais (risqué …) ou de leur code ISO3 (plus sûr)</p>
<div id="sélection-de-pays" class="section level4" number="2.4.3.1">
<h4><span class="header-section-number">2.4.3.1</span> sélection de pays</h4>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="02-API-worldstat.html#cb24-1" aria-hidden="true" tabindex="-1"></a>df   <span class="ot">&lt;-</span> <span class="fu">wb_data</span>(<span class="at">indicator  =</span> <span class="fu">c</span>(<span class="st">&quot;NY.GDP.MKTP.CD&quot;</span>,<span class="st">&quot;SP.POP.TOTL&quot;</span>),</span>
<span id="cb24-2"><a href="02-API-worldstat.html#cb24-2" aria-hidden="true" tabindex="-1"></a>                <span class="at">start_date =</span> <span class="dv">2018</span>,</span>
<span id="cb24-3"><a href="02-API-worldstat.html#cb24-3" aria-hidden="true" tabindex="-1"></a>                <span class="at">end_date =</span> <span class="dv">2018</span>,</span>
<span id="cb24-4"><a href="02-API-worldstat.html#cb24-4" aria-hidden="true" tabindex="-1"></a>                <span class="at">country =</span> <span class="fu">c</span>(<span class="st">&quot;USA&quot;</span>,<span class="st">&quot;CHN&quot;</span>))</span>
<span id="cb24-5"><a href="02-API-worldstat.html#cb24-5" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>GDP.per.capita <span class="ot">&lt;-</span> <span class="fu">round</span>(df<span class="sc">$</span>NY.GDP.MKTP.CD <span class="sc">/</span> df<span class="sc">$</span>SP.POP.TOTL,<span class="dv">0</span>)</span>
<span id="cb24-6"><a href="02-API-worldstat.html#cb24-6" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(<span class="fu">head</span>(df,<span class="dv">6</span>))</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">iso2c</th>
<th align="left">iso3c</th>
<th align="left">country</th>
<th align="right">date</th>
<th align="right">NY.GDP.MKTP.CD</th>
<th align="right">SP.POP.TOTL</th>
<th align="right">GDP.per.capita</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">CN</td>
<td align="left">CHN</td>
<td align="left">China</td>
<td align="right">2018</td>
<td align="right">1.389482e+13</td>
<td align="right">1402760000</td>
<td align="right">9905</td>
</tr>
<tr class="even">
<td align="left">US</td>
<td align="left">USA</td>
<td align="left">United States</td>
<td align="right">2018</td>
<td align="right">2.061186e+13</td>
<td align="right">326838199</td>
<td align="right">63064</td>
</tr>
</tbody>
</table>
<ul>
<li><strong>commentaire</strong> : Il est donc facile de travailler sur un petit nombre de pays que l’on souhaite comparer.</li>
</ul>
</div>
<div id="opérateurs-spéciaux" class="section level4" number="2.4.3.2">
<h4><span class="header-section-number">2.4.3.2</span> Opérateurs spéciaux</h4>
<p>Il existe un certain nombre de paramètres spéciaux que l’on peut utiliser à la place de la liste des pays :</p>
<ul>
<li>“countries_only” (Default)</li>
<li>“regions_only”</li>
<li>“admin_regions_only”</li>
<li>“income_levels_only”</li>
<li>“aggregates_only”</li>
<li>“all”</li>
</ul>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="02-API-worldstat.html#cb25-1" aria-hidden="true" tabindex="-1"></a>df   <span class="ot">&lt;-</span> <span class="fu">wb_data</span>(<span class="at">indicator  =</span> <span class="fu">c</span>(<span class="st">&quot;NY.GDP.MKTP.CD&quot;</span>,<span class="st">&quot;SP.POP.TOTL&quot;</span>),</span>
<span id="cb25-2"><a href="02-API-worldstat.html#cb25-2" aria-hidden="true" tabindex="-1"></a>                <span class="at">start_date =</span> <span class="dv">2018</span>,</span>
<span id="cb25-3"><a href="02-API-worldstat.html#cb25-3" aria-hidden="true" tabindex="-1"></a>                <span class="at">end_date =</span> <span class="dv">2018</span>,</span>
<span id="cb25-4"><a href="02-API-worldstat.html#cb25-4" aria-hidden="true" tabindex="-1"></a>                <span class="at">country =</span> <span class="st">&quot;regions_only&quot;</span>)</span>
<span id="cb25-5"><a href="02-API-worldstat.html#cb25-5" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>GDP.per.capita <span class="ot">&lt;-</span> <span class="fu">round</span>(df<span class="sc">$</span>NY.GDP.MKTP.CD <span class="sc">/</span> df<span class="sc">$</span>SP.POP.TOTL,<span class="dv">0</span>)</span>
<span id="cb25-6"><a href="02-API-worldstat.html#cb25-6" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(df)</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">iso2c</th>
<th align="left">iso3c</th>
<th align="left">country</th>
<th align="right">date</th>
<th align="right">NY.GDP.MKTP.CD</th>
<th align="right">SP.POP.TOTL</th>
<th align="right">GDP.per.capita</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Z4</td>
<td align="left">EAS</td>
<td align="left">East Asia &amp; Pacific</td>
<td align="right">2018</td>
<td align="right">2.641632e+13</td>
<td align="right">2338223462</td>
<td align="right">11298</td>
</tr>
<tr class="even">
<td align="left">Z7</td>
<td align="left">ECS</td>
<td align="left">Europe &amp; Central Asia</td>
<td align="right">2018</td>
<td align="right">2.321731e+13</td>
<td align="right">918031055</td>
<td align="right">25290</td>
</tr>
<tr class="odd">
<td align="left">ZJ</td>
<td align="left">LCN</td>
<td align="left">Latin America &amp; Caribbean</td>
<td align="right">2018</td>
<td align="right">5.703879e+12</td>
<td align="right">640483586</td>
<td align="right">8906</td>
</tr>
<tr class="even">
<td align="left">ZQ</td>
<td align="left">MEA</td>
<td align="left">Middle East &amp; North Africa</td>
<td align="right">2018</td>
<td align="right">3.356567e+12</td>
<td align="right">448974232</td>
<td align="right">7476</td>
</tr>
<tr class="odd">
<td align="left">XU</td>
<td align="left">NAC</td>
<td align="left">North America</td>
<td align="right">2018</td>
<td align="right">2.234094e+13</td>
<td align="right">363967296</td>
<td align="right">61382</td>
</tr>
<tr class="even">
<td align="left">8S</td>
<td align="left">SAS</td>
<td align="left">South Asia</td>
<td align="right">2018</td>
<td align="right">3.436594e+12</td>
<td align="right">1814455018</td>
<td align="right">1894</td>
</tr>
<tr class="odd">
<td align="left">ZG</td>
<td align="left">SSF</td>
<td align="left">Sub-Saharan Africa</td>
<td align="right">2018</td>
<td align="right">1.753415e+12</td>
<td align="right">1078319512</td>
<td align="right">1626</td>
</tr>
</tbody>
</table>
<ul>
<li><strong>commentaire</strong> : Nous avons extrait les données par grandes régions du Monde pour l’année 2016</li>
</ul>
</div>
</div>
<div id="le-format-de-sortie-du-tableau" class="section level3" number="2.4.4">
<h3><span class="header-section-number">2.4.4</span> Le format de sortie du tableau</h3>
<p>Il existe deux façons d’extraire un tableau comprenant plusieurs variables ou plusieurs dates, selon que l’on veut un tableau large (wide) ou étroit. On peut régler la sortie à l’aide du paramètre <code>return_wide</code> qui est TRUE par défaut mais que l’on peut régler sur FALSE.</p>
<div id="return_wide-false" class="section level4" number="2.4.4.1">
<h4><span class="header-section-number">2.4.4.1</span> <code>return_wide</code> = FALSE</h4>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="02-API-worldstat.html#cb26-1" aria-hidden="true" tabindex="-1"></a>df   <span class="ot">&lt;-</span> <span class="fu">wb_data</span>(<span class="at">indicator  =</span> <span class="fu">c</span>(<span class="st">&quot;NY.GDP.MKTP.CD&quot;</span>,<span class="st">&quot;SP.POP.TOTL&quot;</span>),</span>
<span id="cb26-2"><a href="02-API-worldstat.html#cb26-2" aria-hidden="true" tabindex="-1"></a>                <span class="at">return_wide =</span> <span class="cn">TRUE</span>,</span>
<span id="cb26-3"><a href="02-API-worldstat.html#cb26-3" aria-hidden="true" tabindex="-1"></a>                <span class="at">start_date =</span> <span class="dv">2016</span>,</span>
<span id="cb26-4"><a href="02-API-worldstat.html#cb26-4" aria-hidden="true" tabindex="-1"></a>                <span class="at">end_date =</span> <span class="dv">2018</span>,</span>
<span id="cb26-5"><a href="02-API-worldstat.html#cb26-5" aria-hidden="true" tabindex="-1"></a>                <span class="at">country =</span> <span class="fu">c</span>(<span class="st">&quot;USA&quot;</span>,<span class="st">&quot;CHN&quot;</span>))</span>
<span id="cb26-6"><a href="02-API-worldstat.html#cb26-6" aria-hidden="true" tabindex="-1"></a>df</span></code></pre></div>
<pre><code># A tibble: 6 × 6
  iso2c iso3c country        date NY.GDP.MKTP.CD SP.POP.TOTL
  &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;         &lt;dbl&gt;          &lt;dbl&gt;       &lt;dbl&gt;
1 CN    CHN   China          2016        1.12e13  1387790000
2 CN    CHN   China          2017        1.23e13  1396215000
3 CN    CHN   China          2018        1.39e13  1402760000
4 US    USA   United States  2016        1.87e13   323071755
5 US    USA   United States  2017        1.95e13   325122128
6 US    USA   United States  2018        2.06e13   326838199</code></pre>
</div>
<div id="return_wide-false-1" class="section level4" number="2.4.4.2">
<h4><span class="header-section-number">2.4.4.2</span> <code>return_wide</code> = FALSE</h4>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="02-API-worldstat.html#cb28-1" aria-hidden="true" tabindex="-1"></a>df   <span class="ot">&lt;-</span> <span class="fu">wb_data</span>(<span class="at">indicator  =</span> <span class="fu">c</span>(<span class="st">&quot;NY.GDP.MKTP.CD&quot;</span>,<span class="st">&quot;SP.POP.TOTL&quot;</span>),</span>
<span id="cb28-2"><a href="02-API-worldstat.html#cb28-2" aria-hidden="true" tabindex="-1"></a>                <span class="at">return_wide =</span> <span class="cn">FALSE</span>,</span>
<span id="cb28-3"><a href="02-API-worldstat.html#cb28-3" aria-hidden="true" tabindex="-1"></a>                <span class="at">start_date =</span> <span class="dv">2016</span>,</span>
<span id="cb28-4"><a href="02-API-worldstat.html#cb28-4" aria-hidden="true" tabindex="-1"></a>                <span class="at">end_date =</span> <span class="dv">2018</span>,</span>
<span id="cb28-5"><a href="02-API-worldstat.html#cb28-5" aria-hidden="true" tabindex="-1"></a>                <span class="at">country =</span> <span class="fu">c</span>(<span class="st">&quot;USA&quot;</span>,<span class="st">&quot;CHN&quot;</span>))</span>
<span id="cb28-6"><a href="02-API-worldstat.html#cb28-6" aria-hidden="true" tabindex="-1"></a>df[,<span class="dv">1</span><span class="sc">:</span><span class="dv">7</span>]</span></code></pre></div>
<pre><code># A tibble: 12 × 7
   indicator_id   indicator         iso2c iso3c country        date   value
   &lt;chr&gt;          &lt;chr&gt;             &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;         &lt;dbl&gt;   &lt;dbl&gt;
 1 NY.GDP.MKTP.CD GDP (current US$) CN    CHN   China          2018 1.39e13
 2 NY.GDP.MKTP.CD GDP (current US$) CN    CHN   China          2017 1.23e13
 3 NY.GDP.MKTP.CD GDP (current US$) CN    CHN   China          2016 1.12e13
 4 NY.GDP.MKTP.CD GDP (current US$) US    USA   United States  2018 2.06e13
 5 NY.GDP.MKTP.CD GDP (current US$) US    USA   United States  2017 1.95e13
 6 NY.GDP.MKTP.CD GDP (current US$) US    USA   United States  2016 1.87e13
 7 SP.POP.TOTL    Population, total CN    CHN   China          2018 1.40e 9
 8 SP.POP.TOTL    Population, total CN    CHN   China          2017 1.40e 9
 9 SP.POP.TOTL    Population, total CN    CHN   China          2016 1.39e 9
10 SP.POP.TOTL    Population, total US    USA   United States  2018 3.27e 8
11 SP.POP.TOTL    Population, total US    USA   United States  2017 3.25e 8
12 SP.POP.TOTL    Population, total US    USA   United States  2016 3.23e 8</code></pre>
</div>
</div>
</div>
<div id="exercices-1" class="section level2" number="2.5">
<h2><span class="header-section-number">2.5</span> Exercices</h2>
<div id="exercice-1" class="section level3" number="2.5.1">
<h3><span class="header-section-number">2.5.1</span> Exercice 1</h3>
<p>Extraire les métadonnées relatives à la variable <em>SP.URB.TOTL</em></p>
<table style="width:100%;">
<colgroup>
<col width="2%" />
<col width="2%" />
<col width="0%" />
<col width="55%" />
<col width="19%" />
<col width="12%" />
<col width="1%" />
<col width="4%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">indicator_id</th>
<th align="left">indicator</th>
<th align="left">unit</th>
<th align="left">indicator_desc</th>
<th align="left">source_org</th>
<th align="left">topics</th>
<th align="right">source_id</th>
<th align="left">source</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">SP.URB.TOTL</td>
<td align="left">Urban population</td>
<td align="left">NA</td>
<td align="left">Urban population refers to people living in urban areas as defined by national statistical offices. It is calculated using World Bank population estimates and urban ratios from the United Nations World Urbanization Prospects. Aggregation of urban and rural population may not add up to total population because of different country coverages.</td>
<td align="left">World Bank staff estimates based on the United Nations Population Division’s World Urbanization Prospects: 2018 Revision.</td>
<td align="left">19 , 16 , Climate Change , Urban Development</td>
<td align="right">2</td>
<td align="left">World Development Indicators</td>
</tr>
</tbody>
</table>
<div class="solution-exo">
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="02-API-worldstat.html#cb30-1" aria-hidden="true" tabindex="-1"></a>meta<span class="ot">&lt;-</span>cat<span class="sc">$</span>indicators[cat<span class="sc">$</span>indicators<span class="sc">$</span>indicator_id <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;SP.URB.TOTL&quot;</span>),]</span></code></pre></div>
</div>
</div>
<div id="exercice-2" class="section level3" number="2.5.2">
<h3><span class="header-section-number">2.5.2</span> Exercice 2</h3>
<p>Créer un tableau de la population des pays du monde en 2000, triez le par ordre décroissant et affichez les 10 pays les plus peuplés avec leur nom,leur code et la population en millions</p>
<table>
<thead>
<tr class="header">
<th align="left">Code</th>
<th align="left">Pays</th>
<th align="right">Population</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">CHN</td>
<td align="left">China</td>
<td align="right">1262.6</td>
</tr>
<tr class="even">
<td align="left">IND</td>
<td align="left">India</td>
<td align="right">1056.6</td>
</tr>
<tr class="odd">
<td align="left">USA</td>
<td align="left">United States</td>
<td align="right">282.2</td>
</tr>
<tr class="even">
<td align="left">IDN</td>
<td align="left">Indonesia</td>
<td align="right">211.5</td>
</tr>
<tr class="odd">
<td align="left">BRA</td>
<td align="left">Brazil</td>
<td align="right">174.8</td>
</tr>
<tr class="even">
<td align="left">RUS</td>
<td align="left">Russian Federation</td>
<td align="right">146.6</td>
</tr>
<tr class="odd">
<td align="left">PAK</td>
<td align="left">Pakistan</td>
<td align="right">142.3</td>
</tr>
<tr class="even">
<td align="left">BGD</td>
<td align="left">Bangladesh</td>
<td align="right">127.7</td>
</tr>
<tr class="odd">
<td align="left">JPN</td>
<td align="left">Japan</td>
<td align="right">126.8</td>
</tr>
<tr class="even">
<td align="left">NGA</td>
<td align="left">Nigeria</td>
<td align="right">122.3</td>
</tr>
</tbody>
</table>
<div class="solution-exo">
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="02-API-worldstat.html#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Chargement des données avec l&#39;API</span></span>
<span id="cb31-2"><a href="02-API-worldstat.html#cb31-2" aria-hidden="true" tabindex="-1"></a>tab <span class="ot">&lt;-</span> <span class="fu">wb_data</span>(<span class="at">indicator =</span> <span class="fu">c</span>(<span class="st">&quot;SP.POP.TOTL&quot;</span>),</span>
<span id="cb31-3"><a href="02-API-worldstat.html#cb31-3" aria-hidden="true" tabindex="-1"></a>                  <span class="at">start_date=</span><span class="dv">2000</span>,</span>
<span id="cb31-4"><a href="02-API-worldstat.html#cb31-4" aria-hidden="true" tabindex="-1"></a>                  <span class="at">end_date =</span> <span class="dv">2000</span>)</span>
<span id="cb31-5"><a href="02-API-worldstat.html#cb31-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-6"><a href="02-API-worldstat.html#cb31-6" aria-hidden="true" tabindex="-1"></a><span class="do">### Tri, sélection, transformation  et recodage en R-Base</span></span>
<span id="cb31-7"><a href="02-API-worldstat.html#cb31-7" aria-hidden="true" tabindex="-1"></a> <span class="co"># tab&lt;-tab[order(tab$SP.POP.TOTL,decreasing = T),]</span></span>
<span id="cb31-8"><a href="02-API-worldstat.html#cb31-8" aria-hidden="true" tabindex="-1"></a> <span class="co"># tab&lt;-tab[,c(&quot;iso3c&quot;,&quot;country&quot;,&quot;SP.POP.TOTL&quot;)]</span></span>
<span id="cb31-9"><a href="02-API-worldstat.html#cb31-9" aria-hidden="true" tabindex="-1"></a> <span class="co"># tab$SP.POP.TOTL&lt;-tab$SP.POP.TOTL/1000000</span></span>
<span id="cb31-10"><a href="02-API-worldstat.html#cb31-10" aria-hidden="true" tabindex="-1"></a> <span class="co"># names(tab)&lt;-c(&quot;Code&quot;, &quot;Nom&quot;, &quot;Population&quot;)</span></span>
<span id="cb31-11"><a href="02-API-worldstat.html#cb31-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-12"><a href="02-API-worldstat.html#cb31-12" aria-hidden="true" tabindex="-1"></a><span class="do">### Tri, sélection, transformationet recodage en dplyr</span></span>
<span id="cb31-13"><a href="02-API-worldstat.html#cb31-13" aria-hidden="true" tabindex="-1"></a>tab<span class="ot">&lt;-</span> tab <span class="sc">%&gt;%</span> </span>
<span id="cb31-14"><a href="02-API-worldstat.html#cb31-14" aria-hidden="true" tabindex="-1"></a>          <span class="fu">arrange</span>(<span class="fu">desc</span>(SP.POP.TOTL)) <span class="sc">%&gt;%</span></span>
<span id="cb31-15"><a href="02-API-worldstat.html#cb31-15" aria-hidden="true" tabindex="-1"></a>          <span class="fu">select</span>(iso3c, country, SP.POP.TOTL) <span class="sc">%&gt;%</span></span>
<span id="cb31-16"><a href="02-API-worldstat.html#cb31-16" aria-hidden="true" tabindex="-1"></a>          <span class="fu">mutate</span>(<span class="at">SP.POP.TOTL =</span> SP.POP.TOTL<span class="sc">/</span><span class="dv">1000000</span>) <span class="sc">%&gt;%</span></span>
<span id="cb31-17"><a href="02-API-worldstat.html#cb31-17" aria-hidden="true" tabindex="-1"></a>          <span class="fu">rename</span>(<span class="at">Code=</span>iso3c, <span class="at">Pays =</span> country, <span class="at">Population =</span> SP.POP.TOTL)</span>
<span id="cb31-18"><a href="02-API-worldstat.html#cb31-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-19"><a href="02-API-worldstat.html#cb31-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Affichage du résultat</span></span>
<span id="cb31-20"><a href="02-API-worldstat.html#cb31-20" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(<span class="fu">head</span>(tab,<span class="dv">10</span>), <span class="at">digits=</span><span class="dv">1</span>)</span></code></pre></div>
</div>
</div>
<div id="exercice-3" class="section level3" number="2.5.3">
<h3><span class="header-section-number">2.5.3</span> Exercice 3</h3>
<p>On se propose de comparer l’évolution des émissions de CO2 (EN.ATM.CO2E.KT)de la Chine (CHN), l’Inde (IND), la Russie (RUS) le Japon (JPN) et des Etats-Unis d’Amérique (USA) de 1995 à 2015.</p>
<div id="co2-en-valeur-brute-tonnes" class="section level4" number="2.5.3.1">
<h4><span class="header-section-number">2.5.3.1</span> CO2 en valeur brute (tonnes)</h4>
<p>Réalisez un graphique présentant les valeurs de CO2 en milliers de tonnes avec une échelle logarithmique sur l’axe y pour mieux visualiser les taux de croissance.</p>
<p><img src="Data-Mining-1_files/figure-html/unnamed-chunk-20-1.svg" width="672" /></p>
<div class="solution-exo">
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="02-API-worldstat.html#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Chargement des données avec l&#39;API</span></span>
<span id="cb32-2"><a href="02-API-worldstat.html#cb32-2" aria-hidden="true" tabindex="-1"></a>tab <span class="ot">&lt;-</span> <span class="fu">wb_data</span>(<span class="at">indicator =</span> <span class="fu">c</span>(<span class="st">&quot;EN.ATM.CO2E.KT&quot;</span>),</span>
<span id="cb32-3"><a href="02-API-worldstat.html#cb32-3" aria-hidden="true" tabindex="-1"></a>                  <span class="at">country =</span> <span class="fu">c</span>(<span class="st">&quot;CHN&quot;</span>,<span class="st">&quot;IND&quot;</span>,<span class="st">&quot;RUS&quot;</span>,<span class="st">&quot;USA&quot;</span>,<span class="st">&quot;JPN&quot;</span>),</span>
<span id="cb32-4"><a href="02-API-worldstat.html#cb32-4" aria-hidden="true" tabindex="-1"></a>                  <span class="at">start_date=</span><span class="dv">1995</span>,</span>
<span id="cb32-5"><a href="02-API-worldstat.html#cb32-5" aria-hidden="true" tabindex="-1"></a>                  <span class="at">end_date =</span> <span class="dv">2015</span>)</span>
<span id="cb32-6"><a href="02-API-worldstat.html#cb32-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-7"><a href="02-API-worldstat.html#cb32-7" aria-hidden="true" tabindex="-1"></a>p<span class="ot">&lt;-</span><span class="fu">ggplot</span>(tab) <span class="sc">+</span> <span class="fu">aes</span>(<span class="at">x=</span>date, <span class="at">y =</span> EN.ATM.CO2E.KT, <span class="at">color=</span> country) <span class="sc">+</span></span>
<span id="cb32-8"><a href="02-API-worldstat.html#cb32-8" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb32-9"><a href="02-API-worldstat.html#cb32-9" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">scale_y_log10</span>(<span class="st">&quot;en milliers de t&quot;</span>) <span class="sc">+</span></span>
<span id="cb32-10"><a href="02-API-worldstat.html#cb32-10" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">ggtitle</span>(<span class="at">label =</span> <span class="st">&quot;Principaux pays émetteurs de CO2 (1995-2015)&quot;</span>,</span>
<span id="cb32-11"><a href="02-API-worldstat.html#cb32-11" aria-hidden="true" tabindex="-1"></a>                          <span class="at">subtitle =</span> <span class="st">&quot;Source : Banque Mondiale - API wbstat&quot;</span>)</span>
<span id="cb32-12"><a href="02-API-worldstat.html#cb32-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-13"><a href="02-API-worldstat.html#cb32-13" aria-hidden="true" tabindex="-1"></a>p</span></code></pre></div>
</div>
</div>
<div id="co2-en-valeur-relative-tonnes-par-habitant" class="section level4" number="2.5.3.2">
<h4><span class="header-section-number">2.5.3.2</span> CO2 en valeur relative (tonnes par habitant)</h4>
<p>Même exercice mais en téléchargeant aussi la population (SP.POP.TOTL) de façon à calculer la variable CO2.per.capita qui mesure le nombre de tonnes de CO2 par habitant. On utilisera cette fois-ci une échelle arithmétique sur l’axe vertical.</p>
<p><img src="Data-Mining-1_files/figure-html/unnamed-chunk-22-1.svg" width="672" /></p>
<div class="solution-exo">
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="02-API-worldstat.html#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Chargement des données avec l&#39;API</span></span>
<span id="cb33-2"><a href="02-API-worldstat.html#cb33-2" aria-hidden="true" tabindex="-1"></a>tab <span class="ot">&lt;-</span> <span class="fu">wb_data</span>(<span class="at">indicator =</span> <span class="fu">c</span>(<span class="st">&quot;EN.ATM.CO2E.KT&quot;</span>, <span class="st">&quot;SP.POP.TOTL&quot;</span>),</span>
<span id="cb33-3"><a href="02-API-worldstat.html#cb33-3" aria-hidden="true" tabindex="-1"></a>                  <span class="at">country =</span> <span class="fu">c</span>(<span class="st">&quot;CHN&quot;</span>,<span class="st">&quot;IND&quot;</span>,<span class="st">&quot;RUS&quot;</span>,<span class="st">&quot;USA&quot;</span>,<span class="st">&quot;JPN&quot;</span>),</span>
<span id="cb33-4"><a href="02-API-worldstat.html#cb33-4" aria-hidden="true" tabindex="-1"></a>                  <span class="at">start_date=</span><span class="dv">1995</span>,</span>
<span id="cb33-5"><a href="02-API-worldstat.html#cb33-5" aria-hidden="true" tabindex="-1"></a>                  <span class="at">end_date =</span> <span class="dv">2015</span>)</span>
<span id="cb33-6"><a href="02-API-worldstat.html#cb33-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-7"><a href="02-API-worldstat.html#cb33-7" aria-hidden="true" tabindex="-1"></a>tab <span class="ot">&lt;-</span> tab <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">CO2.per.capita =</span> <span class="dv">1000</span><span class="sc">*</span>EN.ATM.CO2E.KT<span class="sc">/</span>SP.POP.TOTL)</span>
<span id="cb33-8"><a href="02-API-worldstat.html#cb33-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-9"><a href="02-API-worldstat.html#cb33-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualisation avec ggplot2</span></span>
<span id="cb33-10"><a href="02-API-worldstat.html#cb33-10" aria-hidden="true" tabindex="-1"></a>p<span class="ot">&lt;-</span><span class="fu">ggplot</span>(tab) <span class="sc">+</span> <span class="fu">aes</span>(<span class="at">x=</span>date, <span class="at">y =</span> CO2.per.capita, <span class="at">color=</span> country) <span class="sc">+</span></span>
<span id="cb33-11"><a href="02-API-worldstat.html#cb33-11" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb33-12"><a href="02-API-worldstat.html#cb33-12" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">scale_y_continuous</span>(<span class="st">&quot;en tonnes par habitant&quot;</span>) <span class="sc">+</span></span>
<span id="cb33-13"><a href="02-API-worldstat.html#cb33-13" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">ggtitle</span>(<span class="at">label =</span> <span class="st">&quot;Principaux pays émetteurs de CO2 (1995-2015)&quot;</span>,</span>
<span id="cb33-14"><a href="02-API-worldstat.html#cb33-14" aria-hidden="true" tabindex="-1"></a>                          <span class="at">subtitle =</span> <span class="st">&quot;Source : Banque Mondiale - API wbstat&quot;</span>)</span>
<span id="cb33-15"><a href="02-API-worldstat.html#cb33-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-16"><a href="02-API-worldstat.html#cb33-16" aria-hidden="true" tabindex="-1"></a>p</span></code></pre></div>
</div>
</div>
</div>
<div id="exercice-4" class="section level3" number="2.5.4">
<h3><span class="header-section-number">2.5.4</span> Exercice 4</h3>
<p>On se propose de comparer les plus grands pays du Monde en combinant deux critères :</p>
<ul>
<li>DEVDUR = Développement durable : mesuré par les quantités de CO2 par habitant</li>
<li>DEVECO = Développement économique : mesurée par le PIB par habitant</li>
</ul>
<div id="analyse-pour-une-année-2010-et-un-seuil-de-population-10-millions" class="section level4" number="2.5.4.1">
<h4><span class="header-section-number">2.5.4.1</span> Analyse pour une année (2010) et un seuil de population (10 millions)</h4>
<p>On construit un programme pour une année précise (2010)et en ne retenant que les pays ayant une population minimale (10 millions d’habitants)</p>
<p><img src="Data-Mining-1_files/figure-html/unnamed-chunk-24-1.svg" width="672" /></p>
<div class="solution-exo">
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="02-API-worldstat.html#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Chargement des données avec l&#39;API</span></span>
<span id="cb34-2"><a href="02-API-worldstat.html#cb34-2" aria-hidden="true" tabindex="-1"></a>tab <span class="ot">&lt;-</span> <span class="fu">wb_data</span>(<span class="at">indicator =</span> <span class="fu">c</span>(<span class="st">&quot;EN.ATM.CO2E.KT&quot;</span>, <span class="st">&quot;SP.POP.TOTL&quot;</span>,<span class="st">&quot;NY.GDP.MKTP.CD&quot;</span>),</span>
<span id="cb34-3"><a href="02-API-worldstat.html#cb34-3" aria-hidden="true" tabindex="-1"></a>                  <span class="at">start_date=</span><span class="dv">2010</span>,</span>
<span id="cb34-4"><a href="02-API-worldstat.html#cb34-4" aria-hidden="true" tabindex="-1"></a>                  <span class="at">end_date =</span> <span class="dv">2010</span>)</span>
<span id="cb34-5"><a href="02-API-worldstat.html#cb34-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-6"><a href="02-API-worldstat.html#cb34-6" aria-hidden="true" tabindex="-1"></a>tab <span class="ot">&lt;-</span> tab <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">DEVDUR =</span> <span class="dv">1000</span><span class="sc">*</span>EN.ATM.CO2E.KT<span class="sc">/</span>SP.POP.TOTL,</span>
<span id="cb34-7"><a href="02-API-worldstat.html#cb34-7" aria-hidden="true" tabindex="-1"></a>                      <span class="at">DEVECO =</span> NY.GDP.MKTP.CD<span class="sc">/</span>SP.POP.TOTL,</span>
<span id="cb34-8"><a href="02-API-worldstat.html#cb34-8" aria-hidden="true" tabindex="-1"></a>                      <span class="at">POP =</span> SP.POP.TOTL<span class="sc">/</span><span class="dv">1000000</span>) <span class="sc">%&gt;%</span></span>
<span id="cb34-9"><a href="02-API-worldstat.html#cb34-9" aria-hidden="true" tabindex="-1"></a>                      <span class="fu">rename</span>(<span class="at">Code =</span> iso3c, </span>
<span id="cb34-10"><a href="02-API-worldstat.html#cb34-10" aria-hidden="true" tabindex="-1"></a>                      <span class="at">Pays =</span> country) <span class="sc">%&gt;%</span></span>
<span id="cb34-11"><a href="02-API-worldstat.html#cb34-11" aria-hidden="true" tabindex="-1"></a>               <span class="fu">select</span>(Code,Pays, POP, DEVDUR, DEVECO)<span class="sc">%&gt;%</span></span>
<span id="cb34-12"><a href="02-API-worldstat.html#cb34-12" aria-hidden="true" tabindex="-1"></a>               <span class="fu">filter</span>(POP <span class="sc">&gt;</span> <span class="dv">10</span>)</span>
<span id="cb34-13"><a href="02-API-worldstat.html#cb34-13" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb34-14"><a href="02-API-worldstat.html#cb34-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-15"><a href="02-API-worldstat.html#cb34-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualisation avec ggplot2</span></span>
<span id="cb34-16"><a href="02-API-worldstat.html#cb34-16" aria-hidden="true" tabindex="-1"></a>p<span class="ot">&lt;-</span><span class="fu">ggplot</span>(tab) <span class="sc">+</span> <span class="fu">aes</span>(<span class="at">x=</span>DEVECO, <span class="at">y =</span> DEVDUR) <span class="sc">+</span></span>
<span id="cb34-17"><a href="02-API-worldstat.html#cb34-17" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">size=</span>POP),<span class="at">col=</span><span class="st">&quot;red&quot;</span>) <span class="sc">+</span></span>
<span id="cb34-18"><a href="02-API-worldstat.html#cb34-18" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label=</span>Code), <span class="at">size=</span><span class="dv">2</span>, <span class="at">nudge_y=</span><span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb34-19"><a href="02-API-worldstat.html#cb34-19" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">scale_x_log10</span>(<span class="st">&quot;PIB par habitant (échelle logarithmique)&quot;</span>) <span class="sc">+</span></span>
<span id="cb34-20"><a href="02-API-worldstat.html#cb34-20" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">scale_y_continuous</span>(<span class="st">&quot;CO2 par habitant&quot;</span>) <span class="sc">+</span></span>
<span id="cb34-21"><a href="02-API-worldstat.html#cb34-21" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">ggtitle</span>(<span class="at">label =</span> <span class="st">&quot;Développement dans le Monde en 2010&quot;</span>,</span>
<span id="cb34-22"><a href="02-API-worldstat.html#cb34-22" aria-hidden="true" tabindex="-1"></a>                          <span class="at">subtitle =</span> <span class="st">&quot;Source : Banque Mondiale - API wbstat&quot;</span>)</span>
<span id="cb34-23"><a href="02-API-worldstat.html#cb34-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-24"><a href="02-API-worldstat.html#cb34-24" aria-hidden="true" tabindex="-1"></a>p</span></code></pre></div>
</div>
</div>
<div id="création-dune-fonction-fannée-population" class="section level4" number="2.5.4.2">
<h4><span class="header-section-number">2.5.4.2</span> Création d’une fonction f(année, population)</h4>
<p>On reprend le même programme mais sous forme d’une fonction <code>mongraphique()</code> renvoyant le diagramme en selon le choix de deux paramètres : l’année et le seuil minimal de population. On teste ensuite la fonction pour l’année 1996 et l’année 2016 en prenant un seuil de 50 millions d’habitants.</p>
<img src="Data-Mining-1_files/figure-html/unnamed-chunk-26-1.svg" width="672" /><img src="Data-Mining-1_files/figure-html/unnamed-chunk-26-2.svg" width="672" />

<div class="solution-exo">
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="02-API-worldstat.html#cb35-1" aria-hidden="true" tabindex="-1"></a>mongraphique <span class="ot">&lt;-</span><span class="cf">function</span>(<span class="at">year =</span> <span class="dv">2010</span>, <span class="at">minpop =</span> <span class="dv">10</span>)</span>
<span id="cb35-2"><a href="02-API-worldstat.html#cb35-2" aria-hidden="true" tabindex="-1"></a>{ </span>
<span id="cb35-3"><a href="02-API-worldstat.html#cb35-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-4"><a href="02-API-worldstat.html#cb35-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Chargement des données avec l&#39;API</span></span>
<span id="cb35-5"><a href="02-API-worldstat.html#cb35-5" aria-hidden="true" tabindex="-1"></a>tab <span class="ot">&lt;-</span> <span class="fu">wb_data</span>(<span class="at">indicator =</span> <span class="fu">c</span>(<span class="st">&quot;EN.ATM.CO2E.KT&quot;</span>, <span class="st">&quot;SP.POP.TOTL&quot;</span>,<span class="st">&quot;NY.GDP.MKTP.CD&quot;</span>),</span>
<span id="cb35-6"><a href="02-API-worldstat.html#cb35-6" aria-hidden="true" tabindex="-1"></a>                  <span class="at">start_date=</span>year,</span>
<span id="cb35-7"><a href="02-API-worldstat.html#cb35-7" aria-hidden="true" tabindex="-1"></a>                  <span class="at">end_date =</span> year)</span>
<span id="cb35-8"><a href="02-API-worldstat.html#cb35-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-9"><a href="02-API-worldstat.html#cb35-9" aria-hidden="true" tabindex="-1"></a>tab <span class="ot">&lt;-</span> tab <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">DEVDUR =</span> <span class="dv">1000</span><span class="sc">*</span>EN.ATM.CO2E.KT<span class="sc">/</span>SP.POP.TOTL,</span>
<span id="cb35-10"><a href="02-API-worldstat.html#cb35-10" aria-hidden="true" tabindex="-1"></a>                      <span class="at">DEVECO =</span> NY.GDP.MKTP.CD<span class="sc">/</span>SP.POP.TOTL,</span>
<span id="cb35-11"><a href="02-API-worldstat.html#cb35-11" aria-hidden="true" tabindex="-1"></a>                      <span class="at">POP =</span> SP.POP.TOTL<span class="sc">/</span><span class="dv">1000000</span>) <span class="sc">%&gt;%</span></span>
<span id="cb35-12"><a href="02-API-worldstat.html#cb35-12" aria-hidden="true" tabindex="-1"></a>                      <span class="fu">rename</span>(<span class="at">Code =</span> iso3c, </span>
<span id="cb35-13"><a href="02-API-worldstat.html#cb35-13" aria-hidden="true" tabindex="-1"></a>                      <span class="at">Pays =</span> country) <span class="sc">%&gt;%</span></span>
<span id="cb35-14"><a href="02-API-worldstat.html#cb35-14" aria-hidden="true" tabindex="-1"></a>               <span class="fu">select</span>(Code,Pays, POP, DEVDUR, DEVECO)<span class="sc">%&gt;%</span></span>
<span id="cb35-15"><a href="02-API-worldstat.html#cb35-15" aria-hidden="true" tabindex="-1"></a>               <span class="fu">filter</span>(POP <span class="sc">&gt;</span> minpop)</span>
<span id="cb35-16"><a href="02-API-worldstat.html#cb35-16" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb35-17"><a href="02-API-worldstat.html#cb35-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-18"><a href="02-API-worldstat.html#cb35-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualisation avec ggplot2</span></span>
<span id="cb35-19"><a href="02-API-worldstat.html#cb35-19" aria-hidden="true" tabindex="-1"></a>p<span class="ot">&lt;-</span><span class="fu">ggplot</span>(tab) <span class="sc">+</span> <span class="fu">aes</span>(<span class="at">x=</span>DEVECO, <span class="at">y =</span> DEVDUR) <span class="sc">+</span></span>
<span id="cb35-20"><a href="02-API-worldstat.html#cb35-20" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">size=</span>POP),<span class="at">col=</span><span class="st">&quot;red&quot;</span>) <span class="sc">+</span></span>
<span id="cb35-21"><a href="02-API-worldstat.html#cb35-21" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label=</span>Code), <span class="at">size=</span><span class="dv">2</span>, <span class="at">nudge_y=</span><span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb35-22"><a href="02-API-worldstat.html#cb35-22" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">scale_x_log10</span>(<span class="st">&quot;PIB par habitant (échelle logarithmique)&quot;</span>) <span class="sc">+</span></span>
<span id="cb35-23"><a href="02-API-worldstat.html#cb35-23" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">scale_y_continuous</span>(<span class="st">&quot;CO2 par habitant&quot;</span>) <span class="sc">+</span></span>
<span id="cb35-24"><a href="02-API-worldstat.html#cb35-24" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">ggtitle</span>(<span class="at">label =</span> <span class="fu">paste</span>(<span class="st">&quot;Développement dans le Monde en &quot;</span>, year),</span>
<span id="cb35-25"><a href="02-API-worldstat.html#cb35-25" aria-hidden="true" tabindex="-1"></a>                          <span class="at">subtitle =</span> <span class="st">&quot;Source : Banque Mondiale - API wbstat&quot;</span>)</span>
<span id="cb35-26"><a href="02-API-worldstat.html#cb35-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-27"><a href="02-API-worldstat.html#cb35-27" aria-hidden="true" tabindex="-1"></a>p</span>
<span id="cb35-28"><a href="02-API-worldstat.html#cb35-28" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb35-29"><a href="02-API-worldstat.html#cb35-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-30"><a href="02-API-worldstat.html#cb35-30" aria-hidden="true" tabindex="-1"></a><span class="fu">mongraphique</span>(<span class="dv">1996</span>,<span class="dv">50</span>)</span>
<span id="cb35-31"><a href="02-API-worldstat.html#cb35-31" aria-hidden="true" tabindex="-1"></a><span class="fu">mongraphique</span>(<span class="dv">2016</span>,<span class="dv">50</span>)</span></code></pre></div>
</div>

</div>
</div>
</div>
</div>
<script src="js/tidyverse.js"></script>
            </section>

          </div>
        </div>
      </div>
<a href="01-API-intro.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="03-API-worldmap.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"],
"instapper": false
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/ClaudeGrasland/DataMining1/blob/master/02-API-worldstat.Rmd",
"text": "Source"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
