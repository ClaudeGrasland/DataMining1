<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapitre 3 L’API Natural Earth | DATA MINING</title>
  <meta name="description" content="Titre du cours" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapitre 3 L’API Natural Earth | DATA MINING" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Titre du cours" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapitre 3 L’API Natural Earth | DATA MINING" />
  
  <meta name="twitter:description" content="Titre du cours" />
  

<meta name="author" content="Claude Grasland, Professeur de Géographie, Université de Paris (Diderot)" />


<meta name="date" content="2021-02-24" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="02-API-worldstat.html"/>

<script src="libs/header-attrs-2.6/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script>
<script src="libs/plotly-binding-4.9.2.2/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.1.0.1/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.1.0.1/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-1.52.2/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-1.52.2/plotly-latest.min.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    background-color: #ffffff;
    color: #a0a0a0;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #a0a0a0;  padding-left: 4px; }
div.sourceCode
  { color: #1f1c1b; background-color: #ffffff; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span. { color: #1f1c1b; } /* Normal */
code span.al { color: #bf0303; background-color: #f7e6e6; font-weight: bold; } /* Alert */
code span.an { color: #ca60ca; } /* Annotation */
code span.at { color: #0057ae; } /* Attribute */
code span.bn { color: #b08000; } /* BaseN */
code span.bu { color: #644a9b; font-weight: bold; } /* BuiltIn */
code span.cf { color: #1f1c1b; font-weight: bold; } /* ControlFlow */
code span.ch { color: #924c9d; } /* Char */
code span.cn { color: #aa5500; } /* Constant */
code span.co { color: #898887; } /* Comment */
code span.cv { color: #0095ff; } /* CommentVar */
code span.do { color: #607880; } /* Documentation */
code span.dt { color: #0057ae; } /* DataType */
code span.dv { color: #b08000; } /* DecVal */
code span.er { color: #bf0303; text-decoration: underline; } /* Error */
code span.ex { color: #0095ff; font-weight: bold; } /* Extension */
code span.fl { color: #b08000; } /* Float */
code span.fu { color: #644a9b; } /* Function */
code span.im { color: #ff5500; } /* Import */
code span.in { color: #b08000; } /* Information */
code span.kw { color: #1f1c1b; font-weight: bold; } /* Keyword */
code span.op { color: #1f1c1b; } /* Operator */
code span.ot { color: #006e28; } /* Other */
code span.pp { color: #006e28; } /* Preprocessor */
code span.re { color: #0057ae; background-color: #e0e9f8; } /* RegionMarker */
code span.sc { color: #3daee9; } /* SpecialChar */
code span.ss { color: #ff5500; } /* SpecialString */
code span.st { color: #bf0303; } /* String */
code span.va { color: #0057ae; } /* Variable */
code span.vs { color: #bf0303; } /* VerbatimString */
code span.wa { color: #bf0303; } /* Warning */
</style>

<link rel="stylesheet" href="css/tidyverse.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./index.html">Data Mining:  <em>C. Grasland (2021)</em></a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="00-presentation.html"><a href="00-presentation.html"><i class="fa fa-check"></i>Présentation</a>
<ul>
<li class="chapter" data-level="" data-path="00-presentation.html"><a href="00-presentation.html#à-propos-de-ce-document"><i class="fa fa-check"></i>À propos de ce document</a></li>
<li class="chapter" data-level="" data-path="00-presentation.html"><a href="00-presentation.html#prérequis"><i class="fa fa-check"></i>Prérequis</a></li>
<li class="chapter" data-level="" data-path="00-presentation.html"><a href="00-presentation.html#remerciements"><i class="fa fa-check"></i>Remerciements</a></li>
<li class="chapter" data-level="" data-path="00-presentation.html"><a href="00-presentation.html#licence"><i class="fa fa-check"></i>Licence</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="01-API-intro.html"><a href="01-API-intro.html"><i class="fa fa-check"></i><b>1</b> Collecter des données à l’aide d’une API</a>
<ul>
<li class="chapter" data-level="1.1" data-path="01-API-intro.html"><a href="01-API-intro.html#quest-ce-quune-api"><i class="fa fa-check"></i><b>1.1</b> Qu’est-ce qu’une API ?</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="01-API-intro.html"><a href="01-API-intro.html#définitions"><i class="fa fa-check"></i><b>1.1.1</b> Définitions</a></li>
<li class="chapter" data-level="1.1.2" data-path="01-API-intro.html"><a href="01-API-intro.html#domaine-dapplication"><i class="fa fa-check"></i><b>1.1.2</b> Domaine d’application</a></li>
<li class="chapter" data-level="1.1.3" data-path="01-API-intro.html"><a href="01-API-intro.html#système-client-serveur"><i class="fa fa-check"></i><b>1.1.3</b> Système client-serveur</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="01-API-intro.html"><a href="01-API-intro.html#comment-utiliser-une-api-dans-r"><i class="fa fa-check"></i><b>1.2</b> Comment utiliser une API dans R ?</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="01-API-intro.html"><a href="01-API-intro.html#pourquoi-utiliser-des-api"><i class="fa fa-check"></i><b>1.2.1</b> Pourquoi utiliser des API ?</a></li>
<li class="chapter" data-level="1.2.2" data-path="01-API-intro.html"><a href="01-API-intro.html#installer-les-packages-jsonlite-et-httr"><i class="fa fa-check"></i><b>1.2.2</b> Installer les packages jsonlite et httr</a></li>
<li class="chapter" data-level="1.2.3" data-path="01-API-intro.html"><a href="01-API-intro.html#structure-dune-requête"><i class="fa fa-check"></i><b>1.2.3</b> Structure d’une requête</a></li>
<li class="chapter" data-level="1.2.4" data-path="01-API-intro.html"><a href="01-API-intro.html#extraction-des-données"><i class="fa fa-check"></i><b>1.2.4</b> Extraction des données</a></li>
<li class="chapter" data-level="1.2.5" data-path="01-API-intro.html"><a href="01-API-intro.html#api-et-mise-à-jour-en-temps-réel"><i class="fa fa-check"></i><b>1.2.5</b> API et mise à jour en temps réel</a></li>
<li class="chapter" data-level="1.2.6" data-path="01-API-intro.html"><a href="01-API-intro.html#api-et-requête-paramétrique"><i class="fa fa-check"></i><b>1.2.6</b> API et requête paramétrique</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="01-API-intro.html"><a href="01-API-intro.html#api-ou-data-packages"><i class="fa fa-check"></i><b>1.3</b> API ou data packages ?</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="01-API-intro.html"><a href="01-API-intro.html#installation-et-chargement-du-package"><i class="fa fa-check"></i><b>1.3.1</b> Installation et chargement du package</a></li>
<li class="chapter" data-level="1.3.2" data-path="01-API-intro.html"><a href="01-API-intro.html#chargement-de-la-liste-des-tableaux"><i class="fa fa-check"></i><b>1.3.2</b> Chargement de la liste des tableaux</a></li>
<li class="chapter" data-level="1.3.3" data-path="01-API-intro.html"><a href="01-API-intro.html#examen-des-séries-présentes-dans-un-tableau"><i class="fa fa-check"></i><b>1.3.3</b> Examen des séries présentes dans un tableau</a></li>
<li class="chapter" data-level="1.3.4" data-path="01-API-intro.html"><a href="01-API-intro.html#extraction-dune-série-à-laide-de-son-identifiant"><i class="fa fa-check"></i><b>1.3.4</b> Extraction d’une série à l’aide de son identifiant</a></li>
<li class="chapter" data-level="1.3.5" data-path="01-API-intro.html"><a href="01-API-intro.html#extraction-dun-ensemble-de-séries-dun-même-tableau"><i class="fa fa-check"></i><b>1.3.5</b> Extraction d’un ensemble de séries d’un même tableau</a></li>
<li class="chapter" data-level="1.3.6" data-path="01-API-intro.html"><a href="01-API-intro.html#recupération-et-nettoyage-des-données"><i class="fa fa-check"></i><b>1.3.6</b> Recupération et nettoyage des données</a></li>
<li class="chapter" data-level="1.3.7" data-path="01-API-intro.html"><a href="01-API-intro.html#construction-dun-graphique"><i class="fa fa-check"></i><b>1.3.7</b> Construction d’un graphique</a></li>
<li class="chapter" data-level="1.3.8" data-path="01-API-intro.html"><a href="01-API-intro.html#discussion"><i class="fa fa-check"></i><b>1.3.8</b> Discussion</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="01-API-intro.html"><a href="01-API-intro.html#exercices"><i class="fa fa-check"></i><b>1.4</b> Exercices</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="01-API-intro.html"><a href="01-API-intro.html#exercice-1-utilisation-de-httr-et-jsonlite"><i class="fa fa-check"></i><b>1.4.1</b> Exercice 1 : utilisation de httr et jsonlite</a></li>
<li class="chapter" data-level="1.4.2" data-path="01-API-intro.html"><a href="01-API-intro.html#exercice-2-utilisation-du-package-insee"><i class="fa fa-check"></i><b>1.4.2</b> Exercice 2 : utilisation du package ‘insee’</a></li>
<li class="chapter" data-level="1.4.3" data-path="01-API-intro.html"><a href="01-API-intro.html#exercice-3-osrm"><i class="fa fa-check"></i><b>1.4.3</b> Exercice 3 : Osrm</a></li>
<li class="chapter" data-level="1.4.4" data-path="01-API-intro.html"><a href="01-API-intro.html#exercice-4-exploration-de-nouvelles-api"><i class="fa fa-check"></i><b>1.4.4</b> Exercice 4 : Exploration de nouvelles API</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="02-API-worldstat.html"><a href="02-API-worldstat.html"><i class="fa fa-check"></i><b>2</b> L’API Wbstats (Banque Mondiale)</a>
<ul>
<li class="chapter" data-level="2.1" data-path="02-API-worldstat.html"><a href="02-API-worldstat.html#objectifs"><i class="fa fa-check"></i><b>2.1</b> Objectifs</a></li>
<li class="chapter" data-level="2.2" data-path="02-API-worldstat.html"><a href="02-API-worldstat.html#le-tableau-countries"><i class="fa fa-check"></i><b>2.2</b> Le tableau “countries”</a></li>
<li class="chapter" data-level="2.3" data-path="02-API-worldstat.html"><a href="02-API-worldstat.html#le-tableau-indicators"><i class="fa fa-check"></i><b>2.3</b> Le tableau indicators</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="02-API-worldstat.html"><a href="02-API-worldstat.html#recherche-du-code-dun-indicateur"><i class="fa fa-check"></i><b>2.3.1</b> Recherche du code d’un indicateur</a></li>
<li class="chapter" data-level="2.3.2" data-path="02-API-worldstat.html"><a href="02-API-worldstat.html#extraction-des-métadonnées"><i class="fa fa-check"></i><b>2.3.2</b> Extraction des métadonnées</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="02-API-worldstat.html"><a href="02-API-worldstat.html#lextraction-des-données"><i class="fa fa-check"></i><b>2.4</b> L’extraction des données</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="02-API-worldstat.html"><a href="02-API-worldstat.html#le-paramètre-indicator"><i class="fa fa-check"></i><b>2.4.1</b> le paramètre <code>indicator =</code></a></li>
<li class="chapter" data-level="2.4.2" data-path="02-API-worldstat.html"><a href="02-API-worldstat.html#le-choix-dune-période-de-temps"><i class="fa fa-check"></i><b>2.4.2</b> le choix d’une période de temps</a></li>
<li class="chapter" data-level="2.4.3" data-path="02-API-worldstat.html"><a href="02-API-worldstat.html#le-choix-des-unités-géographiques"><i class="fa fa-check"></i><b>2.4.3</b> Le choix des unités géographiques</a></li>
<li class="chapter" data-level="2.4.4" data-path="02-API-worldstat.html"><a href="02-API-worldstat.html#le-format-de-sortie-du-tableau"><i class="fa fa-check"></i><b>2.4.4</b> Le format de sortie du tableau</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="02-API-worldstat.html"><a href="02-API-worldstat.html#exercices-1"><i class="fa fa-check"></i><b>2.5</b> Exercices</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="02-API-worldstat.html"><a href="02-API-worldstat.html#exercice-1"><i class="fa fa-check"></i><b>2.5.1</b> Exercice 1</a></li>
<li class="chapter" data-level="2.5.2" data-path="02-API-worldstat.html"><a href="02-API-worldstat.html#exercice-2"><i class="fa fa-check"></i><b>2.5.2</b> Exercice 2</a></li>
<li class="chapter" data-level="2.5.3" data-path="02-API-worldstat.html"><a href="02-API-worldstat.html#exercice-3"><i class="fa fa-check"></i><b>2.5.3</b> Exercice 3</a></li>
<li class="chapter" data-level="2.5.4" data-path="02-API-worldstat.html"><a href="02-API-worldstat.html#exercice-4"><i class="fa fa-check"></i><b>2.5.4</b> Exercice 4</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="03-API-worldmap.html"><a href="03-API-worldmap.html"><i class="fa fa-check"></i><b>3</b> L’API Natural Earth</a>
<ul>
<li class="chapter" data-level="3.1" data-path="03-API-worldmap.html"><a href="03-API-worldmap.html#objectifs-1"><i class="fa fa-check"></i><b>3.1</b> Objectifs</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="03-API-worldmap.html"><a href="03-API-worldmap.html#quel-fonds-de-carte-choisir"><i class="fa fa-check"></i><b>3.1.1</b> Quel fonds de carte choisir ?</a></li>
<li class="chapter" data-level="3.1.2" data-path="03-API-worldmap.html"><a href="03-API-worldmap.html#le-fonds-de-carte-countries110-175-unités"><i class="fa fa-check"></i><b>3.1.2</b> le fonds de carte <em>countries110</em> (175 unités)</a></li>
<li class="chapter" data-level="3.1.3" data-path="03-API-worldmap.html"><a href="03-API-worldmap.html#le-fonds-de-carte-sovereignty110-171-unités"><i class="fa fa-check"></i><b>3.1.3</b> le fonds de carte <em>sovereignty110</em> (171 unités)</a></li>
<li class="chapter" data-level="3.1.4" data-path="03-API-worldmap.html"><a href="03-API-worldmap.html#le-fonds-de-carte-countries50"><i class="fa fa-check"></i><b>3.1.4</b> Le fonds de carte <em>countries50</em></a></li>
<li class="chapter" data-level="3.1.5" data-path="03-API-worldmap.html"><a href="03-API-worldmap.html#autres-fonds-de-carte"><i class="fa fa-check"></i><b>3.1.5</b> Autres fonds de carte :</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="03-API-worldmap.html"><a href="03-API-worldmap.html#exemple-de-combinaison-des-api-wbstats-et-naturalearth"><i class="fa fa-check"></i><b>3.2</b> Exemple de combinaison des API wbstats et naturalearth</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="03-API-worldmap.html"><a href="03-API-worldmap.html#etape-1-récupération-des-données-statistiques"><i class="fa fa-check"></i><b>3.2.1</b> Etape 1 : récupération des données statistiques</a></li>
<li class="chapter" data-level="3.2.2" data-path="03-API-worldmap.html"><a href="03-API-worldmap.html#etape-2-récupération-du-fonds-de-carte"><i class="fa fa-check"></i><b>3.2.2</b> Etape 2 : Récupération du fonds de carte</a></li>
<li class="chapter" data-level="3.2.3" data-path="03-API-worldmap.html"><a href="03-API-worldmap.html#etape-3-jointure-du-fonds-de-carte-et-des-statistiques"><i class="fa fa-check"></i><b>3.2.3</b> Etape 3 : Jointure du fonds de carte et des statistiques</a></li>
<li class="chapter" data-level="3.2.4" data-path="03-API-worldmap.html"><a href="03-API-worldmap.html#etape-4-visualisation-avec-ggplot"><i class="fa fa-check"></i><b>3.2.4</b> Etape 4 : Visualisation avec ggplot</a></li>
<li class="chapter" data-level="3.2.5" data-path="03-API-worldmap.html"><a href="03-API-worldmap.html#etape-5-visualisation-avec-plotly"><i class="fa fa-check"></i><b>3.2.5</b> Etape 5 :Visualisation avec plotly</a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">DATA MINING</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="c03-API-worldmap" class="section level1" number="3">
<h1><span class="header-section-number">Chapitre 3</span> L’API Natural Earth</h1>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="03-API-worldmap.html#cb77-1"></a><span class="co">## Global options</span></span>
<span id="cb77-2"><a href="03-API-worldmap.html#cb77-2"></a><span class="kw">library</span>(knitr)</span>
<span id="cb77-3"><a href="03-API-worldmap.html#cb77-3"></a><span class="kw">library</span>(dplyr)</span>
<span id="cb77-4"><a href="03-API-worldmap.html#cb77-4"></a><span class="kw">library</span>(ggplot2)</span>
<span id="cb77-5"><a href="03-API-worldmap.html#cb77-5"></a><span class="kw">library</span>(sf)</span>
<span id="cb77-6"><a href="03-API-worldmap.html#cb77-6"></a></span>
<span id="cb77-7"><a href="03-API-worldmap.html#cb77-7"></a></span>
<span id="cb77-8"><a href="03-API-worldmap.html#cb77-8"></a>opts_chunk<span class="op">$</span><span class="kw">set</span>(<span class="dt">echo=</span><span class="ot">TRUE</span>,</span>
<span id="cb77-9"><a href="03-API-worldmap.html#cb77-9"></a>               <span class="dt">cache=</span><span class="ot">TRUE</span>,</span>
<span id="cb77-10"><a href="03-API-worldmap.html#cb77-10"></a>               <span class="dt">prompt=</span><span class="ot">FALSE</span>,</span>
<span id="cb77-11"><a href="03-API-worldmap.html#cb77-11"></a>               <span class="dt">tidy=</span><span class="ot">FALSE</span>,</span>
<span id="cb77-12"><a href="03-API-worldmap.html#cb77-12"></a>               <span class="dt">comment=</span><span class="ot">NA</span>,</span>
<span id="cb77-13"><a href="03-API-worldmap.html#cb77-13"></a>               <span class="dt">message=</span><span class="ot">FALSE</span>,</span>
<span id="cb77-14"><a href="03-API-worldmap.html#cb77-14"></a>               <span class="dt">warning=</span><span class="ot">FALSE</span>)</span></code></pre></div>
<div id="objectifs-1" class="section level2" number="3.1">
<h2><span class="header-section-number">3.1</span> Objectifs</h2>
<p>Nous allons ici utiliser le fonds de carte <em>Natural Earth</em> qui est un fonds de carte libre de droit et mis à jour régulièrement. Le site web du projet se situe à l’adresse suivante :</p>
<p><a href="https://www.naturalearthdata.com/" class="uri">https://www.naturalearthdata.com/</a></p>
<p>Il indique ses objectifs comme suit :</p>
<blockquote>
<p>“Natural Earth is a public domain map dataset available at 1:10m, 1:50m, and 1:110 million scales. Featuring tightly integrated vector and raster data, with Natural Earth you can make a variety of visually pleasing, well-crafted maps with cartography or GIS software.[…] Natural Earth was built through a collaboration of many volunteers and is supported by NACIS (North American Cartographic Information Society), and is free for use in any type of project (see our Terms of Use page for more information).”</p>
</blockquote>
<p>On peut télécharger les différents fonds de carte sur le site web, mais dans une perspective de mise à jour automatique régulière du fonds de carte il est plus pertinent d’utiliser l’API <code>rnaturalearth</code>qui permet d’accéder directement à la plupart des fonds de carte avec juste quelques lignes de code. Il suffit pour cela de commencer par installer et charger le package.</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="03-API-worldmap.html#cb78-1"></a><span class="kw">library</span>(<span class="st">&quot;rnaturalearth&quot;</span>)</span>
<span id="cb78-2"><a href="03-API-worldmap.html#cb78-2"></a><span class="kw">library</span>(<span class="st">&quot;rnaturalearthdata&quot;</span>)</span></code></pre></div>
<div id="quel-fonds-de-carte-choisir" class="section level3" number="3.1.1">
<h3><span class="header-section-number">3.1.1</span> Quel fonds de carte choisir ?</h3>
</div>
<div id="le-fonds-de-carte-countries110-175-unités" class="section level3" number="3.1.2">
<h3><span class="header-section-number">3.1.2</span> le fonds de carte <em>countries110</em> (175 unités)</h3>
<p>On va télécharger tout d’abord le fonds de carte des pays du Monde avec une forte généralisation des contours <code>countries110</code> et le transformer en objet de type spatial feature du package <code>sf</code> du package avant de le visualiser et d’ examiner le nombre d’unités</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="03-API-worldmap.html#cb79-1"></a>map&lt;-<span class="kw">st_as_sf</span>(countries110)</span>
<span id="cb79-2"><a href="03-API-worldmap.html#cb79-2"></a><span class="kw">class</span>(map)</span></code></pre></div>
<pre><code>[1] &quot;sf&quot;         &quot;data.frame&quot;</code></pre>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="03-API-worldmap.html#cb81-1"></a><span class="kw">ggplot</span>(<span class="dt">data =</span> map) <span class="op">+</span></span>
<span id="cb81-2"><a href="03-API-worldmap.html#cb81-2"></a><span class="st">        </span><span class="kw">geom_sf</span>(<span class="dt">fill=</span><span class="st">&quot;lightyellow&quot;</span>) <span class="op">+</span></span>
<span id="cb81-3"><a href="03-API-worldmap.html#cb81-3"></a><span class="st">        </span><span class="kw">theme_bw</span>()</span></code></pre></div>
<p><img src="Data-Mining-1_files/figure-html/unnamed-chunk-53-1.svg" width="672" /></p>
<p>Ce fonds de carte comporte 175 unités spatiales, mais de quoi s’agit-il exactement. Les métadonnées associées permettent de se faire une idée plus précise de la nature exacte de ces unités. Prenons pour cela quelques exempes</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="03-API-worldmap.html#cb82-1"></a>sel&lt;-map[map<span class="op">$</span>adm0_a3 <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;FRA&quot;</span>, <span class="st">&quot;NCL&quot;</span>,<span class="st">&quot;ATA&quot;</span>,<span class="st">&quot;ATF&quot;</span>,<span class="st">&quot;USA&quot;</span>, <span class="st">&quot;PRI&quot;</span>,<span class="st">&quot;CHN&quot;</span>,<span class="st">&quot;TWN&quot;</span>,<span class="st">&quot;MAR&quot;</span>, <span class="st">&quot;SAH&quot;</span>,<span class="st">&quot;CHN&quot;</span>,<span class="st">&quot;TWN&quot;</span>,<span class="st">&quot;ISR&quot;</span>,<span class="st">&quot;PSX&quot;</span>),<span class="kw">c</span>(<span class="st">&quot;sovereignt&quot;</span>,<span class="st">&quot;sov_a3&quot;</span>,<span class="st">&quot;type&quot;</span>,<span class="st">&quot;admin&quot;</span>, <span class="st">&quot;adm0_a3&quot;</span>,<span class="st">&quot;name&quot;</span>,<span class="st">&quot;note_adm0&quot;</span>,<span class="st">&quot;iso_a3&quot;</span>,<span class="st">&quot;wb_a3&quot;</span>)]</span>
<span id="cb82-2"><a href="03-API-worldmap.html#cb82-2"></a><span class="kw">kable</span>(sel)</span></code></pre></div>
<table>
<colgroup>
<col width="2%" />
<col width="13%" />
<col width="3%" />
<col width="9%" />
<col width="19%" />
<col width="4%" />
<col width="12%" />
<col width="12%" />
<col width="3%" />
<col width="3%" />
<col width="16%" />
</colgroup>
<thead>
<tr class="header">
<th align="left"></th>
<th align="left">sovereignt</th>
<th align="left">sov_a3</th>
<th align="left">type</th>
<th align="left">admin</th>
<th align="left">adm0_a3</th>
<th align="left">name</th>
<th align="left">note_adm0</th>
<th align="left">iso_a3</th>
<th align="left">wb_a3</th>
<th align="left">geometry</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">6</td>
<td align="left">Antarctica</td>
<td align="left">ATA</td>
<td align="left">Indeterminate</td>
<td align="left">Antarctica</td>
<td align="left">ATA</td>
<td align="left">Antarctica</td>
<td align="left">NA</td>
<td align="left">ATA</td>
<td align="left">NA</td>
<td align="left">MULTIPOLYGON (((-59.57209 -…</td>
</tr>
<tr class="even">
<td align="left">7</td>
<td align="left">France</td>
<td align="left">FR1</td>
<td align="left">Dependency</td>
<td align="left">French Southern and Antarctic Lands</td>
<td align="left">ATF</td>
<td align="left">Fr. S. Antarctic Lands</td>
<td align="left">Fr.</td>
<td align="left">ATF</td>
<td align="left">NA</td>
<td align="left">MULTIPOLYGON (((68.935 -48….</td>
</tr>
<tr class="odd">
<td align="left">30</td>
<td align="left">China</td>
<td align="left">CH1</td>
<td align="left">Country</td>
<td align="left">China</td>
<td align="left">CHN</td>
<td align="left">China</td>
<td align="left">NA</td>
<td align="left">CHN</td>
<td align="left">CHN</td>
<td align="left">MULTIPOLYGON (((110.3392 18…</td>
</tr>
<tr class="even">
<td align="left">55</td>
<td align="left">France</td>
<td align="left">FR1</td>
<td align="left">Country</td>
<td align="left">France</td>
<td align="left">FRA</td>
<td align="left">France</td>
<td align="left">NA</td>
<td align="left">FRA</td>
<td align="left">FRA</td>
<td align="left">MULTIPOLYGON (((-52.55642 2…</td>
</tr>
<tr class="odd">
<td align="left">78</td>
<td align="left">Israel</td>
<td align="left">ISR</td>
<td align="left">Sovereign country</td>
<td align="left">Israel</td>
<td align="left">ISR</td>
<td align="left">Israel</td>
<td align="left">NA</td>
<td align="left">ISR</td>
<td align="left">ISR</td>
<td align="left">MULTIPOLYGON (((35.71992 32…</td>
</tr>
<tr class="even">
<td align="left">99</td>
<td align="left">Morocco</td>
<td align="left">MAR</td>
<td align="left">Sovereign country</td>
<td align="left">Morocco</td>
<td align="left">MAR</td>
<td align="left">Morocco</td>
<td align="left">NA</td>
<td align="left">MAR</td>
<td align="left">MAR</td>
<td align="left">MULTIPOLYGON (((-5.193863 3…</td>
</tr>
<tr class="odd">
<td align="left">113</td>
<td align="left">France</td>
<td align="left">FR1</td>
<td align="left">Dependency</td>
<td align="left">New Caledonia</td>
<td align="left">NCL</td>
<td align="left">New Caledonia</td>
<td align="left">Fr.</td>
<td align="left">NCL</td>
<td align="left">NCL</td>
<td align="left">MULTIPOLYGON (((165.78 -21….</td>
</tr>
<tr class="even">
<td align="left">128</td>
<td align="left">United States of America</td>
<td align="left">US1</td>
<td align="left">Dependency</td>
<td align="left">Puerto Rico</td>
<td align="left">PRI</td>
<td align="left">Puerto Rico</td>
<td align="left">Commonwealth of U.S.A.</td>
<td align="left">PRI</td>
<td align="left">PRI</td>
<td align="left">MULTIPOLYGON (((-66.28243 1…</td>
</tr>
<tr class="odd">
<td align="left">132</td>
<td align="left">Israel</td>
<td align="left">ISR</td>
<td align="left">Disputed</td>
<td align="left">Palestine</td>
<td align="left">PSX</td>
<td align="left">Palestine</td>
<td align="left">Partial self-admin.</td>
<td align="left">PSE</td>
<td align="left">WBG</td>
<td align="left">MULTIPOLYGON (((35.54567 32…</td>
</tr>
<tr class="even">
<td align="left">137</td>
<td align="left">Western Sahara</td>
<td align="left">SAH</td>
<td align="left">Indeterminate</td>
<td align="left">Western Sahara</td>
<td align="left">SAH</td>
<td align="left">W. Sahara</td>
<td align="left">Self admin.</td>
<td align="left">ESH</td>
<td align="left">NA</td>
<td align="left">MULTIPOLYGON (((-8.794884 2…</td>
</tr>
<tr class="odd">
<td align="left">163</td>
<td align="left">Taiwan</td>
<td align="left">TWN</td>
<td align="left">Sovereign country</td>
<td align="left">Taiwan</td>
<td align="left">TWN</td>
<td align="left">Taiwan</td>
<td align="left">NA</td>
<td align="left">TWN</td>
<td align="left">NA</td>
<td align="left">MULTIPOLYGON (((121.7778 24…</td>
</tr>
<tr class="even">
<td align="left">168</td>
<td align="left">United States of America</td>
<td align="left">US1</td>
<td align="left">Country</td>
<td align="left">United States of America</td>
<td align="left">USA</td>
<td align="left">United States</td>
<td align="left">NA</td>
<td align="left">USA</td>
<td align="left">USA</td>
<td align="left">MULTIPOLYGON (((-155.5421 1…</td>
</tr>
</tbody>
</table>
<p>Les exemples présentés dans le tableau ci-dessus montrent la complexité du problème de définition et de représentation cartographique des “pays” ou “bouts du monde”. Quelques remarques :</p>
<ol style="list-style-type: decimal">
<li>La <em>France</em> (FR1) en tant qu’état souverain regroupe ici cartographiquement la partie métropolitaine du pays et les Départements d’Outre-Mer (Guyane Française, Réunion, Martinique, Guadeloupe) en une seule entité spatiale, mais elle met à part la Nouvelle Calédonie et les îles antarctiques.</li>
<li><em>Porto Rico</em> (PRI) est considéré comme une dépendance des <em>Etats-Unis</em> (US1) au même titre que la <em>Nouvelle Calédonie</em>(NCL) est considérée comme une dépendance de la <em>France</em> (FR1).</li>
<li>Le <em>Sahara occidental</em> (SAH) est considéré comme une zone <em>indéterminée</em> bien qu’il soit occupé par le <em>Maroc</em> (MAR).</li>
<li>la Palestine (PSX) est considéré comme une zone <em>disputée</em> mais rattachée en terme de souveraineté à <em>Israël</em> (ISR) et une note précise qu’elle est <em>partiellement semi-administrée</em>. Le code sur trois caractères des territoires palestiniens est très variable selon les organisations (PSX, PSE, WBG).</li>
<li><em>Taïwan</em> (TWN) est présenté comme un état souverain, mais son code ISO3 est manquant pour la banque mondiale car la Chine refuse de le reconnaître.</li>
<li>Plusieurs états souverains de petite taille sont absents de ce fonds de carte qui ne regroupe que 175 unités soit moins que les 193 pays membres des Nations-Unies. La plupart des îles du Pacifique sont en particulier éliminées car leur surface les rendrait invisible pour le degré de généralisation cartographique adopté.</li>
</ol>
</div>
<div id="le-fonds-de-carte-sovereignty110-171-unités" class="section level3" number="3.1.3">
<h3><span class="header-section-number">3.1.3</span> le fonds de carte <em>sovereignty110</em> (171 unités)</h3>
<p>On peut obtenir un fonds différent en installant le package complémentaire <code>rnaturalearthdata</code> qui permet notamment de distinguer le fonds de carte des <em>countries</em> (c’est-à-dire des “bouts du monde” souverains ou non) et des <em>sovereignty</em> (c’est-à-dire des états souverains)</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="03-API-worldmap.html#cb83-1"></a><span class="kw">library</span>(rnaturalearthdata)</span>
<span id="cb83-2"><a href="03-API-worldmap.html#cb83-2"></a>map&lt;-<span class="kw">st_as_sf</span>(sovereignty110)</span>
<span id="cb83-3"><a href="03-API-worldmap.html#cb83-3"></a></span>
<span id="cb83-4"><a href="03-API-worldmap.html#cb83-4"></a><span class="kw">ggplot</span>(<span class="dt">data =</span> map) <span class="op">+</span></span>
<span id="cb83-5"><a href="03-API-worldmap.html#cb83-5"></a><span class="st"> </span><span class="kw">geom_sf</span>(<span class="dt">fill=</span><span class="st">&quot;lightyellow&quot;</span>) <span class="op">+</span><span class="st">  </span></span>
<span id="cb83-6"><a href="03-API-worldmap.html#cb83-6"></a><span class="st">  </span><span class="kw">theme_bw</span>()</span></code></pre></div>
<p><img src="Data-Mining-1_files/figure-html/unnamed-chunk-55-1.svg" width="672" /></p>
<p>Le fonds de carte permet désormais de récupérer la plupart des pays souverains du Monde, y compris les petits états insulaires du Pacifique, mais il fait disparaître de façon sélective les territoires indéterminés ou disputés. Ainsi, le Sahra Occidental demeure partiellement séparé du Maroc mais les territoires palestiniens sont annexés à Israël ainsi que le plateau du Golan ce qui n’est évidemment pas un choix neutred’un point de vue géoolitique.</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="03-API-worldmap.html#cb84-1"></a><span class="kw">par</span>(<span class="dt">mfrow=</span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>))</span>
<span id="cb84-2"><a href="03-API-worldmap.html#cb84-2"></a></span>
<span id="cb84-3"><a href="03-API-worldmap.html#cb84-3"></a>map2&lt;-map <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(sov_a3 <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;ISR&quot;</span>,<span class="st">&quot;JOR&quot;</span>,<span class="st">&quot;SYR&quot;</span>,<span class="st">&quot;LBN&quot;</span>,<span class="st">&quot;EGY&quot;</span>))</span>
<span id="cb84-4"><a href="03-API-worldmap.html#cb84-4"></a><span class="kw">ggplot</span>(<span class="dt">data =</span> map2) <span class="op">+</span></span>
<span id="cb84-5"><a href="03-API-worldmap.html#cb84-5"></a><span class="st">    </span><span class="kw">geom_sf</span>(<span class="dt">fill=</span><span class="kw">c</span>(<span class="st">&quot;gray80&quot;</span>,<span class="st">&quot;orange&quot;</span>,<span class="st">&quot;gray80&quot;</span>,<span class="st">&quot;gray80&quot;</span>,<span class="st">&quot;gray80&quot;</span>)) <span class="op">+</span></span>
<span id="cb84-6"><a href="03-API-worldmap.html#cb84-6"></a><span class="st">    </span><span class="kw">ggtitle</span>(<span class="st">&quot;Limits of Israël&quot;</span>) <span class="op">+</span></span>
<span id="cb84-7"><a href="03-API-worldmap.html#cb84-7"></a><span class="st">  </span><span class="kw">theme_minimal</span>()</span></code></pre></div>
<p><img src="Data-Mining-1_files/figure-html/unnamed-chunk-56-1.svg" width="672" /></p>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="03-API-worldmap.html#cb85-1"></a>map3&lt;-map <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(sov_a3 <span class="op">%in%</span><span class="kw">c</span>(<span class="st">&quot;MAR&quot;</span>,<span class="st">&quot;SAH&quot;</span>,<span class="st">&quot;DZA&quot;</span>,<span class="st">&quot;MRT&quot;</span>))</span>
<span id="cb85-2"><a href="03-API-worldmap.html#cb85-2"></a><span class="kw">ggplot</span>(<span class="dt">data =</span> map3) <span class="op">+</span></span>
<span id="cb85-3"><a href="03-API-worldmap.html#cb85-3"></a><span class="st">    </span><span class="kw">geom_sf</span>(<span class="dt">fill=</span><span class="kw">c</span>(<span class="st">&quot;gray70&quot;</span>,<span class="st">&quot;orange&quot;</span>,<span class="st">&quot;gray70&quot;</span>,<span class="st">&quot;lightyellow&quot;</span>)) <span class="op">+</span></span>
<span id="cb85-4"><a href="03-API-worldmap.html#cb85-4"></a><span class="st">    </span><span class="kw">ggtitle</span>(<span class="st">&quot;Limits of Morocco&quot;</span>) <span class="op">+</span></span>
<span id="cb85-5"><a href="03-API-worldmap.html#cb85-5"></a><span class="st">  </span><span class="kw">theme_minimal</span>()</span></code></pre></div>
<p><img src="Data-Mining-1_files/figure-html/unnamed-chunk-56-2.svg" width="672" /></p>
</div>
<div id="le-fonds-de-carte-countries50" class="section level3" number="3.1.4">
<h3><span class="header-section-number">3.1.4</span> Le fonds de carte <em>countries50</em></h3>
<p>On peut également choisir un fonds moins généralisé dans lequel tous les petits pays seront présents</p>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="03-API-worldmap.html#cb86-1"></a>map&lt;-<span class="kw">st_as_sf</span>(countries50)</span>
<span id="cb86-2"><a href="03-API-worldmap.html#cb86-2"></a><span class="kw">ggplot</span>(<span class="dt">data =</span> map) <span class="op">+</span></span>
<span id="cb86-3"><a href="03-API-worldmap.html#cb86-3"></a><span class="st">    </span><span class="kw">geom_sf</span>(<span class="dt">fill=</span><span class="st">&quot;lightyellow&quot;</span>) <span class="op">+</span></span>
<span id="cb86-4"><a href="03-API-worldmap.html#cb86-4"></a><span class="st">  </span><span class="kw">theme_bw</span>()</span></code></pre></div>
<p><img src="Data-Mining-1_files/figure-html/unnamed-chunk-57-1.svg" width="672" /></p>
</div>
<div id="autres-fonds-de-carte" class="section level3" number="3.1.5">
<h3><span class="header-section-number">3.1.5</span> Autres fonds de carte :</h3>
<p>Il existe toute une série d’autres fonds de carte dans le package Natural Earth, notamment avec des résolutions plus précises, mais on se limitera ici à l’exploration des fonds de carte utile pour produire des cartes à contour généralisé couvrant le monde entier.</p>
</div>
</div>
<div id="exemple-de-combinaison-des-api-wbstats-et-naturalearth" class="section level2" number="3.2">
<h2><span class="header-section-number">3.2</span> Exemple de combinaison des API wbstats et naturalearth</h2>
<p>Nous allons finalement essayer de constituer une carte des émissions de CO2 en 2016 basée sur la combinaison des données <code>wbstats</code> et du fonds de carte <code>naturalearth</code>.</p>
<div id="etape-1-récupération-des-données-statistiques" class="section level3" number="3.2.1">
<h3><span class="header-section-number">3.2.1</span> Etape 1 : récupération des données statistiques</h3>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="03-API-worldmap.html#cb87-1"></a><span class="kw">library</span>(wbstats)</span>
<span id="cb87-2"><a href="03-API-worldmap.html#cb87-2"></a>cat&lt;-wb_cachelist</span>
<span id="cb87-3"><a href="03-API-worldmap.html#cb87-3"></a></span>
<span id="cb87-4"><a href="03-API-worldmap.html#cb87-4"></a>don1&lt;-cat<span class="op">$</span>countries <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb87-5"><a href="03-API-worldmap.html#cb87-5"></a><span class="st">        </span><span class="kw">filter</span>(region <span class="op">!=</span><span class="st">&quot;Aggregates&quot;</span>) <span class="op">%&gt;%</span></span>
<span id="cb87-6"><a href="03-API-worldmap.html#cb87-6"></a><span class="st">        </span><span class="kw">select</span>(iso3c,country, longitude, latitude)</span>
<span id="cb87-7"><a href="03-API-worldmap.html#cb87-7"></a></span>
<span id="cb87-8"><a href="03-API-worldmap.html#cb87-8"></a>don2 &lt;-<span class="st"> </span><span class="kw">wb_data</span>(<span class="dt">indicator =</span> <span class="kw">c</span>(<span class="st">&quot;EN.ATM.CO2E.KT&quot;</span>),</span>
<span id="cb87-9"><a href="03-API-worldmap.html#cb87-9"></a>                  <span class="dt">start_date=</span><span class="dv">2015</span>,</span>
<span id="cb87-10"><a href="03-API-worldmap.html#cb87-10"></a>                  <span class="dt">end_date =</span> <span class="dv">2015</span>) <span class="op">%&gt;%</span></span>
<span id="cb87-11"><a href="03-API-worldmap.html#cb87-11"></a><span class="st">        </span><span class="kw">select</span>(iso3c, EN.ATM.CO2E.KT)</span>
<span id="cb87-12"><a href="03-API-worldmap.html#cb87-12"></a></span>
<span id="cb87-13"><a href="03-API-worldmap.html#cb87-13"></a>don &lt;-<span class="st"> </span><span class="kw">left_join</span>(don1,don2) <span class="op">%&gt;%</span></span>
<span id="cb87-14"><a href="03-API-worldmap.html#cb87-14"></a><span class="st">        </span><span class="kw">rename</span>(<span class="dt">ISO3 =</span> iso3c, <span class="dt">CO2 =</span> EN.ATM.CO2E.KT)</span>
<span id="cb87-15"><a href="03-API-worldmap.html#cb87-15"></a></span>
<span id="cb87-16"><a href="03-API-worldmap.html#cb87-16"></a><span class="kw">kable</span>(<span class="kw">head</span>(don))</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">ISO3</th>
<th align="left">country</th>
<th align="right">longitude</th>
<th align="right">latitude</th>
<th align="right">CO2</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">ABW</td>
<td align="left">Aruba</td>
<td align="right">-70.0167</td>
<td align="right">12.51670</td>
<td align="right">898.415</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="left">Afghanistan</td>
<td align="right">69.1761</td>
<td align="right">34.52280</td>
<td align="right">9035.488</td>
</tr>
<tr class="odd">
<td align="left">AGO</td>
<td align="left">Angola</td>
<td align="right">13.2420</td>
<td align="right">-8.81155</td>
<td align="right">34583.477</td>
</tr>
<tr class="even">
<td align="left">ALB</td>
<td align="left">Albania</td>
<td align="right">19.8172</td>
<td align="right">41.33170</td>
<td align="right">4616.753</td>
</tr>
<tr class="odd">
<td align="left">AND</td>
<td align="left">Andorra</td>
<td align="right">1.5218</td>
<td align="right">42.50750</td>
<td align="right">465.709</td>
</tr>
<tr class="even">
<td align="left">ARE</td>
<td align="left">United Arab Emirates</td>
<td align="right">54.3705</td>
<td align="right">24.47640</td>
<td align="right">194765.371</td>
</tr>
</tbody>
</table>
</div>
<div id="etape-2-récupération-du-fonds-de-carte" class="section level3" number="3.2.2">
<h3><span class="header-section-number">3.2.2</span> Etape 2 : Récupération du fonds de carte</h3>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb88-1"><a href="03-API-worldmap.html#cb88-1"></a>map&lt;-<span class="kw">st_as_sf</span>(countries110)</span>
<span id="cb88-2"><a href="03-API-worldmap.html#cb88-2"></a>map&lt;-<span class="kw">st_as_sf</span>(countries110) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb88-3"><a href="03-API-worldmap.html#cb88-3"></a><span class="st">        </span><span class="kw">select</span>(adm0_a3,geometry) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb88-4"><a href="03-API-worldmap.html#cb88-4"></a><span class="st">        </span><span class="kw">rename</span>(<span class="dt">ISO3 =</span> adm0_a3)</span>
<span id="cb88-5"><a href="03-API-worldmap.html#cb88-5"></a><span class="kw">head</span>(map)</span></code></pre></div>
<pre><code># A tibble: 6 x 2
  ISO3                                                                  geometry
  &lt;chr&gt;                                                       &lt;MULTIPOLYGON [°]&gt;
1 AFG   (((61.21082 35.65007, 62.23065 35.27066, 62.98466 35.40404, 63.19354 35…
2 AGO   (((16.32653 -5.87747, 16.57318 -6.622645, 16.86019 -7.222298, 17.09 -7.…
3 ALB   (((20.59025 41.8554, 20.46318 41.51509, 20.60518 41.08623, 21.02004 40.…
4 ARE   (((51.57952 24.2455, 51.75744 24.29407, 51.79439 24.01983, 52.57708 24.…
5 ARG   (((-65.5 -55.2, -66.45 -55.25, -66.95992 -54.89681, -67.56244 -54.87001…
6 ARM   (((43.58275 41.09214, 44.97248 41.24813, 45.1795 40.98535, 45.56035 40.…</code></pre>
</div>
<div id="etape-3-jointure-du-fonds-de-carte-et-des-statistiques" class="section level3" number="3.2.3">
<h3><span class="header-section-number">3.2.3</span> Etape 3 : Jointure du fonds de carte et des statistiques</h3>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb90-1"><a href="03-API-worldmap.html#cb90-1"></a>mapdon &lt;-<span class="st"> </span><span class="kw">right_join</span>(don,map) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">st_as_sf</span>()</span>
<span id="cb90-2"><a href="03-API-worldmap.html#cb90-2"></a><span class="kw">class</span>(mapdon)</span></code></pre></div>
<pre><code>[1] &quot;sf&quot;         &quot;tbl_df&quot;     &quot;tbl&quot;        &quot;data.frame&quot;</code></pre>
</div>
<div id="etape-4-visualisation-avec-ggplot" class="section level3" number="3.2.4">
<h3><span class="header-section-number">3.2.4</span> Etape 4 : Visualisation avec ggplot</h3>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb92-1"><a href="03-API-worldmap.html#cb92-1"></a><span class="kw">ggplot</span>(<span class="dt">data =</span> mapdon) <span class="op">+</span></span>
<span id="cb92-2"><a href="03-API-worldmap.html#cb92-2"></a><span class="st"> </span><span class="kw">geom_sf</span>(<span class="dt">fill=</span><span class="st">&quot;lightyellow&quot;</span>)<span class="op">+</span></span>
<span id="cb92-3"><a href="03-API-worldmap.html#cb92-3"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">x=</span>longitude,<span class="dt">y=</span>latitude, <span class="dt">size=</span>CO2), <span class="dt">col =</span> <span class="st">&quot;red&quot;</span>)<span class="op">+</span></span>
<span id="cb92-4"><a href="03-API-worldmap.html#cb92-4"></a><span class="st">  </span><span class="kw">theme_bw</span>()</span></code></pre></div>
<p><img src="Data-Mining-1_files/figure-html/unnamed-chunk-61-1.svg" width="672" /></p>
</div>
<div id="etape-5-visualisation-avec-plotly" class="section level3" number="3.2.5">
<h3><span class="header-section-number">3.2.5</span> Etape 5 :Visualisation avec plotly</h3>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="03-API-worldmap.html#cb93-1"></a><span class="co"># Create map</span></span>
<span id="cb93-2"><a href="03-API-worldmap.html#cb93-2"></a><span class="kw">library</span>(plotly)</span>
<span id="cb93-3"><a href="03-API-worldmap.html#cb93-3"></a></span>
<span id="cb93-4"><a href="03-API-worldmap.html#cb93-4"></a></span>
<span id="cb93-5"><a href="03-API-worldmap.html#cb93-5"></a>g &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">showframe =</span> <span class="ot">TRUE</span>,</span>
<span id="cb93-6"><a href="03-API-worldmap.html#cb93-6"></a>          <span class="dt">framecolor=</span> <span class="kw">toRGB</span>(<span class="st">&quot;gray50&quot;</span>),</span>
<span id="cb93-7"><a href="03-API-worldmap.html#cb93-7"></a>          <span class="dt">coastlinecolor =</span> <span class="kw">toRGB</span>(<span class="st">&quot;black&quot;</span>),</span>
<span id="cb93-8"><a href="03-API-worldmap.html#cb93-8"></a>          <span class="dt">showland =</span> <span class="ot">TRUE</span>,</span>
<span id="cb93-9"><a href="03-API-worldmap.html#cb93-9"></a>          <span class="dt">landcolor =</span> <span class="kw">toRGB</span>(<span class="st">&quot;lightyellow&quot;</span>),</span>
<span id="cb93-10"><a href="03-API-worldmap.html#cb93-10"></a>          <span class="dt">showcountries =</span> <span class="ot">TRUE</span>,</span>
<span id="cb93-11"><a href="03-API-worldmap.html#cb93-11"></a>          <span class="dt">countrycolor =</span> <span class="kw">toRGB</span>(<span class="st">&quot;black&quot;</span>),</span>
<span id="cb93-12"><a href="03-API-worldmap.html#cb93-12"></a>          <span class="dt">countrywidth =</span> <span class="fl">0.2</span>,</span>
<span id="cb93-13"><a href="03-API-worldmap.html#cb93-13"></a>         <span class="dt">projection =</span> <span class="kw">list</span>(<span class="dt">type =</span> <span class="st">&#39;azimuthal equal area&#39;</span>))</span>
<span id="cb93-14"><a href="03-API-worldmap.html#cb93-14"></a>  <span class="co">#        projection = list(type = &#39;Mercator&#39;))</span></span>
<span id="cb93-15"><a href="03-API-worldmap.html#cb93-15"></a></span>
<span id="cb93-16"><a href="03-API-worldmap.html#cb93-16"></a></span>
<span id="cb93-17"><a href="03-API-worldmap.html#cb93-17"></a></span>
<span id="cb93-18"><a href="03-API-worldmap.html#cb93-18"></a>p&lt;-<span class="st"> </span><span class="kw">plot_geo</span>(mapdon)<span class="op">%&gt;%</span></span>
<span id="cb93-19"><a href="03-API-worldmap.html#cb93-19"></a><span class="st">  </span><span class="kw">add_markers</span>(<span class="dt">x =</span> <span class="op">~</span>longitude,</span>
<span id="cb93-20"><a href="03-API-worldmap.html#cb93-20"></a>              <span class="dt">y =</span> <span class="op">~</span>latitude,</span>
<span id="cb93-21"><a href="03-API-worldmap.html#cb93-21"></a>              <span class="dt">sizes =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">1000</span>),</span>
<span id="cb93-22"><a href="03-API-worldmap.html#cb93-22"></a>              <span class="dt">size =</span> <span class="op">~</span>CO2,</span>
<span id="cb93-23"><a href="03-API-worldmap.html#cb93-23"></a>     <span class="co">#         color= &quot;red&quot;,</span></span>
<span id="cb93-24"><a href="03-API-worldmap.html#cb93-24"></a></span>
<span id="cb93-25"><a href="03-API-worldmap.html#cb93-25"></a>              <span class="dt">hoverinfo =</span> <span class="st">&quot;text&quot;</span>,</span>
<span id="cb93-26"><a href="03-API-worldmap.html#cb93-26"></a>              <span class="dt">text =</span> <span class="op">~</span><span class="kw">paste</span>(<span class="st">&#39;Pays: &#39;</span>, country,</span>
<span id="cb93-27"><a href="03-API-worldmap.html#cb93-27"></a>                            <span class="st">&#39;&lt;br /&gt; CO2 en kT : &#39;</span>,CO2)) <span class="op">%&gt;%</span></span>
<span id="cb93-28"><a href="03-API-worldmap.html#cb93-28"></a><span class="st">  </span><span class="kw">layout</span>(<span class="dt">geo =</span> g,</span>
<span id="cb93-29"><a href="03-API-worldmap.html#cb93-29"></a>              <span class="dt">width=</span><span class="dv">800</span>,</span>
<span id="cb93-30"><a href="03-API-worldmap.html#cb93-30"></a>              <span class="dt">height=</span><span class="dv">400</span>,</span>
<span id="cb93-31"><a href="03-API-worldmap.html#cb93-31"></a>         <span class="dt">title =</span> <span class="st">&quot;Emissions de CO2 en 2015&quot;</span>)</span>
<span id="cb93-32"><a href="03-API-worldmap.html#cb93-32"></a>p</span></code></pre></div>
<div id="htmlwidget-582ab3782b851d7e5611" style="width:576px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-582ab3782b851d7e5611">{"x":{"visdat":{"6143743998a":["function () ","plotlyVisDat"]},"cur_data":"6143743998a","attrs":{"6143743998a":{"alpha_stroke":1,"sizes":[0,1000],"spans":[1,20],"x":{},"y":{},"type":"scatter","mode":"markers","size":{},"hoverinfo":"text","text":{},"inherit":true}},"layout":{"width":800,"height":400,"margin":{"b":40,"l":60,"t":25,"r":10},"mapType":"geo","geo":{"domain":{"x":[0,1],"y":[0,1]},"showframe":true,"framecolor":"rgba(127,127,127,1)","coastlinecolor":"rgba(0,0,0,1)","showland":true,"landcolor":"rgba(255,255,224,1)","showcountries":true,"countrycolor":"rgba(0,0,0,1)","countrywidth":0.2,"projection":{"type":"azimuthal equal area"}},"title":"Emissions de CO2 en 2015","hovermode":"closest","showlegend":false},"source":"A","config":{"showSendToCloud":false},"data":[{"type":"scattergeo","mode":"markers","hoverinfo":["text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text"],"text":["Pays:  Afghanistan <br /> CO2 en kT :  9035.488","Pays:  Angola <br /> CO2 en kT :  34583.477","Pays:  Albania <br /> CO2 en kT :  4616.753","Pays:  United Arab Emirates <br /> CO2 en kT :  194765.371","Pays:  Argentina <br /> CO2 en kT :  201167.953","Pays:  Armenia <br /> CO2 en kT :  4803.77","Pays:  Australia <br /> CO2 en kT :  365332.209","Pays:  Austria <br /> CO2 en kT :  61264.569","Pays:  Azerbaijan <br /> CO2 en kT :  37597.751","Pays:  Burundi <br /> CO2 en kT :  403.37","Pays:  Belgium <br /> CO2 en kT :  99346.364","Pays:  Benin <br /> CO2 en kT :  6065.218","Pays:  Burkina Faso <br /> CO2 en kT :  3329.636","Pays:  Bangladesh <br /> CO2 en kT :  81073.703","Pays:  Bulgaria <br /> CO2 en kT :  44737.4","Pays:  Bahamas, The <br /> CO2 en kT :  2016.85","Pays:  Bosnia and Herzegovina <br /> CO2 en kT :  18569.688","Pays:  Belarus <br /> CO2 en kT :  58279.631","Pays:  Belize <br /> CO2 en kT :  579.386","Pays:  Bolivia <br /> CO2 en kT :  20073.158","Pays:  Brazil <br /> CO2 en kT :  504388.516","Pays:  Brunei Darussalam <br /> CO2 en kT :  7073.643","Pays:  Bhutan <br /> CO2 en kT :  1067.097","Pays:  Botswana <br /> CO2 en kT :  5430.827","Pays:  Central African Republic <br /> CO2 en kT :  293.36","Pays:  Canada <br /> CO2 en kT :  549430.277","Pays:  Switzerland <br /> CO2 en kT :  35672.576","Pays:  Chile <br /> CO2 en kT :  83244.567","Pays:  China <br /> CO2 en kT :  10145004.856","Pays:  Cote d'Ivoire <br /> CO2 en kT :  10960.663","Pays:  Cameroon <br /> CO2 en kT :  7928.054","Pays:  Congo, Dem. Rep. <br /> CO2 en kT :  2838.258","Pays:  Congo, Rep. <br /> CO2 en kT :  3230.627","Pays:  Colombia <br /> CO2 en kT :  94109.888","Pays:  Costa Rica <br /> CO2 en kT :  7513.683","Pays:  Cuba <br /> CO2 en kT :  29244.325","Pays:  Cyprus <br /> CO2 en kT :  6138.558","Pays:  Czech Republic <br /> CO2 en kT :  99852.41","Pays:  Germany <br /> CO2 en kT :  727045.089","Pays:  Djibouti <br /> CO2 en kT :  627.057","Pays:  Denmark <br /> CO2 en kT :  30817.468","Pays:  Dominican Republic <br /> CO2 en kT :  24136.194","Pays:  Algeria <br /> CO2 en kT :  153133.92","Pays:  Ecuador <br /> CO2 en kT :  43270.6","Pays:  Egypt, Arab Rep. <br /> CO2 en kT :  224581.748","Pays:  Eritrea <br /> CO2 en kT :  693.063","Pays:  Spain <br /> CO2 en kT :  250496.437","Pays:  Estonia <br /> CO2 en kT :  16362.154","Pays:  Ethiopia <br /> CO2 en kT :  13718.247","Pays:  Finland <br /> CO2 en kT :  42606.873","Pays:  Fiji <br /> CO2 en kT :  2156.196","Pays:  France <br /> CO2 en kT :  NA","Pays:  Gabon <br /> CO2 en kT :  5262.145","Pays:  United Kingdom <br /> CO2 en kT :  405038.485","Pays:  Georgia <br /> CO2 en kT :  9798.224","Pays:  Ghana <br /> CO2 en kT :  16552.838","Pays:  Guinea <br /> CO2 en kT :  2702.579","Pays:  Gambia, The <br /> CO2 en kT :  524.381","Pays:  Guinea-Bissau <br /> CO2 en kT :  278.692","Pays:  Equatorial Guinea <br /> CO2 en kT :  6028.548","Pays:  Greece <br /> CO2 en kT :  65059.914","Pays:  Greenland <br /> CO2 en kT :  509.713","Pays:  Guatemala <br /> CO2 en kT :  15834.106","Pays:  Guyana <br /> CO2 en kT :  2016.85","Pays:  Honduras <br /> CO2 en kT :  10018.244","Pays:  Croatia <br /> CO2 en kT :  17311.907","Pays:  Haiti <br /> CO2 en kT :  2933.6","Pays:  Hungary <br /> CO2 en kT :  44418.371","Pays:  Indonesia <br /> CO2 en kT :  512749.276","Pays:  India <br /> CO2 en kT :  2337749.17","Pays:  Ireland <br /> CO2 en kT :  35907.264","Pays:  Iran, Islamic Rep. <br /> CO2 en kT :  650078.426","Pays:  Iraq <br /> CO2 en kT :  167273.872","Pays:  Iceland <br /> CO2 en kT :  1987.514","Pays:  Israel <br /> CO2 en kT :  66207.685","Pays:  Italy <br /> CO2 en kT :  NA","Pays:  Jamaica <br /> CO2 en kT :  7572.355","Pays:  Jordan <br /> CO2 en kT :  26200.715","Pays:  Japan <br /> CO2 en kT :  1163803.124","Pays:  Kazakhstan <br /> CO2 en kT :  242091.673","Pays:  Kenya <br /> CO2 en kT :  17018.547","Pays:  Kyrgyz Republic <br /> CO2 en kT :  10447.283","Pays:  Cambodia <br /> CO2 en kT :  8628.451","Pays:  Korea, Rep. <br /> CO2 en kT :  597354.3","Pays:  Kuwait <br /> CO2 en kT :  92984.119","Pays:  Lao PDR <br /> CO2 en kT :  9046.489","Pays:  Lebanon <br /> CO2 en kT :  24469.891","Pays:  Liberia <br /> CO2 en kT :  1239.446","Pays:  Libya <br /> CO2 en kT :  56996.181","Pays:  Sri Lanka <br /> CO2 en kT :  20113.495","Pays:  Lesotho <br /> CO2 en kT :  2346.88","Pays:  Lithuania <br /> CO2 en kT :  13083.856","Pays:  Luxembourg <br /> CO2 en kT :  9251.841","Pays:  Latvia <br /> CO2 en kT :  7007.637","Pays:  Morocco <br /> CO2 en kT :  61271.903","Pays:  Moldova <br /> CO2 en kT :  4943.116","Pays:  Madagascar <br /> CO2 en kT :  3644.998","Pays:  Mexico <br /> CO2 en kT :  482947.567","Pays:  North Macedonia <br /> CO2 en kT :  7099.312","Pays:  Mali <br /> CO2 en kT :  3168.288","Pays:  Myanmar <br /> CO2 en kT :  22299.027","Pays:  Montenegro <br /> CO2 en kT :  2240.537","Pays:  Mongolia <br /> CO2 en kT :  23285.45","Pays:  Mozambique <br /> CO2 en kT :  6486.923","Pays:  Mauritania <br /> CO2 en kT :  2893.263","Pays:  Malawi <br /> CO2 en kT :  1151.438","Pays:  Malaysia <br /> CO2 en kT :  234823.679","Pays:  Namibia <br /> CO2 en kT :  3989.696","Pays:  New Caledonia <br /> CO2 en kT :  4752.432","Pays:  Niger <br /> CO2 en kT :  2027.851","Pays:  Nigeria <br /> CO2 en kT :  115928.538","Pays:  Nicaragua <br /> CO2 en kT :  5331.818","Pays:  Netherlands <br /> CO2 en kT :  172492.013","Pays:  Norway <br /> CO2 en kT :  47212.625","Pays:  Nepal <br /> CO2 en kT :  6252.235","Pays:  New Zealand <br /> CO2 en kT :  34887.838","Pays:  Oman <br /> CO2 en kT :  65386.277","Pays:  Pakistan <br /> CO2 en kT :  188542.472","Pays:  Panama <br /> CO2 en kT :  11129.345","Pays:  Peru <br /> CO2 en kT :  52636.118","Pays:  Philippines <br /> CO2 en kT :  117120.313","Pays:  Papua New Guinea <br /> CO2 en kT :  7480.68","Pays:  Poland <br /> CO2 en kT :  285659.3","Pays:  Puerto Rico <br /> CO2 en kT :  NA","Pays:  Korea, Dem. People’s Rep. <br /> CO2 en kT :  25423.311","Pays:  Portugal <br /> CO2 en kT :  49258.811","Pays:  Paraguay <br /> CO2 en kT :  6303.573","Pays:  Qatar <br /> CO2 en kT :  106841.712","Pays:  Romania <br /> CO2 en kT :  71715.519","Pays:  Russian Federation <br /> CO2 en kT :  1698213.369","Pays:  Rwanda <br /> CO2 en kT :  960.754","Pays:  Saudi Arabia <br /> CO2 en kT :  647111.823","Pays:  Sudan <br /> CO2 en kT :  19816.468","Pays:  Senegal <br /> CO2 en kT :  10637.967","Pays:  Solomon Islands <br /> CO2 en kT :  190.684","Pays:  Sierra Leone <br /> CO2 en kT :  1067.097","Pays:  El Salvador <br /> CO2 en kT :  6849.956","Pays:  Somalia <br /> CO2 en kT :  630.724","Pays:  Serbia <br /> CO2 en kT :  43919.659","Pays:  Suriname <br /> CO2 en kT :  1723.49","Pays:  Slovak Republic <br /> CO2 en kT :  31283.177","Pays:  Slovenia <br /> CO2 en kT :  12530.139","Pays:  Sweden <br /> CO2 en kT :  38180.804","Pays:  Eswatini <br /> CO2 en kT :  982.756","Pays:  Syrian Arab Republic <br /> CO2 en kT :  29295.663","Pays:  Chad <br /> CO2 en kT :  1001.091","Pays:  Togo <br /> CO2 en kT :  2636.573","Pays:  Thailand <br /> CO2 en kT :  284364.849","Pays:  Tajikistan <br /> CO2 en kT :  5005.455","Pays:  Turkmenistan <br /> CO2 en kT :  70674.091","Pays:  Timor-Leste <br /> CO2 en kT :  502.379","Pays:  Trinidad and Tobago <br /> CO2 en kT :  46255.538","Pays:  Tunisia <br /> CO2 en kT :  30252.75","Pays:  Turkey <br /> CO2 en kT :  350337.846","Pays:  Tanzania <br /> CO2 en kT :  12933.509","Pays:  Uganda <br /> CO2 en kT :  5342.819","Pays:  Ukraine <br /> CO2 en kT :  196283.509","Pays:  Uruguay <br /> CO2 en kT :  6699.609","Pays:  United States <br /> CO2 en kT :  5126913.374","Pays:  Uzbekistan <br /> CO2 en kT :  102929.023","Pays:  Venezuela, RB <br /> CO2 en kT :  171894.292","Pays:  Vietnam <br /> CO2 en kT :  188329.786","Pays:  Vanuatu <br /> CO2 en kT :  132.012","Pays:  Yemen, Rep. <br /> CO2 en kT :  13171.864","Pays:  South Africa <br /> CO2 en kT :  463952.507","Pays:  Zambia <br /> CO2 en kT :  4532.412","Pays:  Zimbabwe <br /> CO2 en kT :  12317.453"],"marker":{"color":"rgba(31,119,180,1)","size":[0.877633079971603,3.39594842929704,0.442069710381084,19.1853916744863,19.816506731171,0.460504342621014,35.9984992040576,6.02595596219382,3.69307132539945,0.0267482899167622,9.77975313497187,0.584847744396233,0.31519606496509,7.97858112611746,4.3968405209121,0.185792175908321,1.81743786083082,5.73172477310944,0.0440985320249323,1.96563784550477,49.7055519328893,0.684250173140958,0.0921731611996536,0.52231458013137,0.0159043885991559,54.1454065956945,3.50330305234134,8.19256744545156,1000,1.06740135302971,0.768471140041033,0.266759972413115,0.305436553779244,9.26358343225381,0.727625778411383,2.86965775201588,0.592077011941304,9.82963508103286,71.6532467363472,0.0487975559292284,3.02472554085765,2.3661392675017,15.0816979525268,4.25225517001068,22.1244503949349,0.0553038967197921,24.6789120819857,1.59983690772418,1.33922181272438,4.18683029872779,0.199527784243956,null,0.505687264777707,39.912424652959,0.95281746244034,1.61863300334137,0.253385827454734,0.0386765813661291,0.0144585350901417,0.581233110623698,6.40007055765124,0.037230727857115,1.54778618139967,0.185792175908321,0.974505265075553,1.69345592243285,0.276158020221707,4.36539320709104,50.5296884330273,230.423504951325,3.52643670848557,64.0664919111725,16.4755007352165,0.182900468890293,6.5132085947316,null,0.73340919244744,2.56964314889544,114.70534228413,23.8504380213206,1.66453885225257,1.01679648021422,0.83751064509646,58.8693714730211,9.15261417543697,0.878717470103364,2.39903243483177,0.10916193993057,5.6052125910707,1.96961394265456,0.21832387986114,1.27668864845952,0.898959419229562,0.677743832350394,6.02667888894833,0.474239950956649,0.346281915408895,47.5920755660878,0.686780416781733,0.299291676365934,2.18504611549767,0.207841441920787,2.28227976397887,0.626416032780391,0.272181923071918,0.100486818876485,23.134017607604,0.380259472870728,0.455443855339465,0.186876566040082,11.4142905269124,0.512555068945525,16.9898631210483,4.64082830055824,0.603282376636164,3.42594988960908,6.4322407982268,18.5719883232871,1.08402866838338,5.17543263551624,11.5317661245198,0.724372608016101,28.1449844064699,null,2.49301291291769,4.84252486506572,0.608342863917714,10.5185842780781,7.05612658736642,167.383207568176,0.0816907232593008,63.7740680389744,1.94033540909702,1.0355925758314,0.00578341403605669,0.0921731611996536,0.662200907128492,0.0491590193064819,4.31623418778456,0.156875105728038,3.07063138976885,1.22210767849423,3.75054400238277,0.0838595035228221,2.87471823929743,0.0856668204090898,0.24687948666417,28.0173878342994,0.480384828369959,6.95347098822641,0.0365078011026079,4.54648635909507,2.96906018076061,34.5204754544679,1.26186864999212,0.513639459077285,19.3350375126693,0.647380908661096,505.356887250897,10.1329028545486,16.930944590556,18.5510234474064,0,1.2853637695136,45.7196952719144,0.433756052704252,1.20114280261352],"sizemode":"area","line":{"color":"rgba(31,119,180,1)"}},"textfont":{"size":[0.877633079971603,3.39594842929704,0.442069710381084,19.1853916744863,19.816506731171,0.460504342621014,35.9984992040576,6.02595596219382,3.69307132539945,0.0267482899167622,9.77975313497187,0.584847744396233,0.31519606496509,7.97858112611746,4.3968405209121,0.185792175908321,1.81743786083082,5.73172477310944,0.0440985320249323,1.96563784550477,49.7055519328893,0.684250173140958,0.0921731611996536,0.52231458013137,0.0159043885991559,54.1454065956945,3.50330305234134,8.19256744545156,1000,1.06740135302971,0.768471140041033,0.266759972413115,0.305436553779244,9.26358343225381,0.727625778411383,2.86965775201588,0.592077011941304,9.82963508103286,71.6532467363472,0.0487975559292284,3.02472554085765,2.3661392675017,15.0816979525268,4.25225517001068,22.1244503949349,0.0553038967197921,24.6789120819857,1.59983690772418,1.33922181272438,4.18683029872779,0.199527784243956,null,0.505687264777707,39.912424652959,0.95281746244034,1.61863300334137,0.253385827454734,0.0386765813661291,0.0144585350901417,0.581233110623698,6.40007055765124,0.037230727857115,1.54778618139967,0.185792175908321,0.974505265075553,1.69345592243285,0.276158020221707,4.36539320709104,50.5296884330273,230.423504951325,3.52643670848557,64.0664919111725,16.4755007352165,0.182900468890293,6.5132085947316,null,0.73340919244744,2.56964314889544,114.70534228413,23.8504380213206,1.66453885225257,1.01679648021422,0.83751064509646,58.8693714730211,9.15261417543697,0.878717470103364,2.39903243483177,0.10916193993057,5.6052125910707,1.96961394265456,0.21832387986114,1.27668864845952,0.898959419229562,0.677743832350394,6.02667888894833,0.474239950956649,0.346281915408895,47.5920755660878,0.686780416781733,0.299291676365934,2.18504611549767,0.207841441920787,2.28227976397887,0.626416032780391,0.272181923071918,0.100486818876485,23.134017607604,0.380259472870728,0.455443855339465,0.186876566040082,11.4142905269124,0.512555068945525,16.9898631210483,4.64082830055824,0.603282376636164,3.42594988960908,6.4322407982268,18.5719883232871,1.08402866838338,5.17543263551624,11.5317661245198,0.724372608016101,28.1449844064699,null,2.49301291291769,4.84252486506572,0.608342863917714,10.5185842780781,7.05612658736642,167.383207568176,0.0816907232593008,63.7740680389744,1.94033540909702,1.0355925758314,0.00578341403605669,0.0921731611996536,0.662200907128492,0.0491590193064819,4.31623418778456,0.156875105728038,3.07063138976885,1.22210767849423,3.75054400238277,0.0838595035228221,2.87471823929743,0.0856668204090898,0.24687948666417,28.0173878342994,0.480384828369959,6.95347098822641,0.0365078011026079,4.54648635909507,2.96906018076061,34.5204754544679,1.26186864999212,0.513639459077285,19.3350375126693,0.647380908661096,505.356887250897,10.1329028545486,16.930944590556,18.5510234474064,0,1.2853637695136,45.7196952719144,0.433756052704252,1.20114280261352]},"line":{"color":"rgba(31,119,180,1)"},"geo":"geo","lat":[34.5228,-8.81155,41.3317,24.4764,-34.6118,40.1596,-35.282,48.2201,40.3834,-3.3784,50.8371,6.4779,12.3605,23.7055,42.7105,25.0661,43.8607,53.9678,17.2534,-13.9908,-15.7801,4.94199,27.5768,-24.6544,5.63056,45.4215,46.948,-33.475,40.0495,5.332,3.8721,-4.325,-4.2767,4.60987,9.63701,23.1333,35.1676,50.0878,52.5235,11.5806,55.6763,18.479,36.7397,-0.229498,30.0982,15.3315,40.4167,59.4392,9.02274,60.1608,-18.1149,48.8566,0.38832,51.5002,41.71,5.57045,9.51667,13.4495,11.8037,3.7523,37.9792,64.1836,14.6248,6.80461,15.1333,45.8069,18.5392,47.4984,-6.19752,28.6353,53.3441,35.6878,33.3302,64.1353,31.7717,41.8955,17.9927,31.9497,35.67,51.1879,-1.27975,42.8851,11.5556,37.5323,29.3721,18.5826,33.8872,6.30039,32.8578,6.92148,-29.5208,54.6896,49.61,56.9465,33.9905,47.0167,-20.4667,19.427,42.0024,13.5667,21.914,42.4602,47.9129,-25.9664,18.2367,-13.9899,3.12433,-22.5648,-22.2677,13.514,9.05804,12.1475,52.3738,59.9138,27.6939,-41.2865,23.6105,30.5167,8.99427,-12.0931,14.5515,-9.47357,52.26,18.23,39.0319,38.7072,-25.3005,25.2948,44.4479,55.7558,-1.95325,24.6748,15.5932,14.7247,-9.42676,8.4821,13.7034,2.07515,44.8024,5.8232,48.1484,46.0546,59.3327,-26.5225,33.5146,12.1048,6.1228,13.7308,38.5878,37.9509,-8.56667,10.6596,36.7899,39.7153,-6.17486,0.314269,50.4536,-34.8941,38.8895,41.3052,9.08165,21.0069,-17.7404,15.352,-25.746,-15.3982,-17.8312],"lon":[69.1761,13.242,19.8172,54.3705,-58.4173,44.509,149.129,16.3798,49.8932,29.3639,4.36761,2.6323,-1.53395,90.4113,23.3238,-77.339,18.4214,27.5766,-88.7713,-66.1936,-47.9292,114.946,89.6177,25.9201,21.6407,-75.6919,7.44821,-70.6475,116.286,-4.0305,11.5174,15.3222,15.2662,-74.082,-84.0089,-82.3667,33.3736,14.4205,13.4115,43.1425,12.5681,-69.8908,3.05097,-78.5243,31.2461,38.9183,-3.70327,24.7586,38.7468,24.9525,178.399,2.35097,9.45162,-0.126236,44.793,-0.20795,-13.7,-16.5885,-15.1804,8.7741,23.7166,-51.7214,-90.5328,-58.1548,-87.4667,15.9614,-72.3288,19.0408,106.83,77.225,-6.26749,51.4447,44.394,-21.8952,35.2035,12.4823,-76.792,35.9263,139.77,71.4382,36.8126,74.6057,104.874,126.957,47.9824,102.177,35.5134,-10.7957,13.1072,79.8528,27.7167,25.2799,6.1296,24.1048,-6.8704,28.8497,45.7167,-99.1276,21.4361,-7.50034,95.9562,19.2595,106.937,32.5713,-15.9824,33.7703,101.684,17.0931,166.464,2.1073,7.48906,-86.2734,4.89095,10.7387,85.3157,174.776,58.5874,72.8,-79.5188,-77.0465,121.035,147.194,21.02,-66,125.754,-9.13552,-57.6362,51.5082,26.0979,37.6176,30.0587,46.6977,32.5363,-17.4734,159.949,-13.2134,-89.2073,45.3254,20.4656,-55.1679,17.1073,14.5044,18.0645,31.4659,36.3119,15.0445,1.2255,100.521,68.7864,58.3794,125.567,-61.4789,10.21,32.3606,35.7382,32.5729,30.5038,-56.0675,-77.032,69.269,-69.8371,105.825,168.321,44.2075,28.1871,28.2937,31.0672],"frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>

</div>
</div>
</div>






<script src="js/tidyverse.js"></script>
            </section>

          </div>
        </div>
      </div>
<a href="02-API-worldstat.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"],
"instapper": false
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/ClaudeGrasland/DataMining1/blob/master/03-API-worldmap.Rmd",
"text": "Source"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
